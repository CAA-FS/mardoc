<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>MARATHON Training Slides</title>
<!-- 2017-09-08 Fri 14:18 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="T. Spoon" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<style>pre.src {background-color: #303030; color: #e5e5e5;}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">MARATHON Training Slides</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Overview</a>
<ul>
<li><a href="#sec-1-1">1.1. Purpose</a></li>
<li><a href="#sec-1-2">1.2. Agenda</a></li>
<li><a href="#sec-1-3">1.3. Daily Schedule</a></li>
<li><a href="#sec-1-4">1.4. Prerequisites</a></li>
<li><a href="#sec-1-5">1.5. Prerequisites Ctd.</a></li>
<li><a href="#sec-1-6">1.6. Online References</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Day 1 - Background Concepts, Data, Typical Analysis</a></li>
<li><a href="#sec-3">3. Background Concepts</a>
<ul>
<li><a href="#sec-3-1">3.1. Army Force Structure  (Background)</a></li>
<li><a href="#sec-3-2">3.2. Army Force Structure Analysis</a></li>
<li><a href="#sec-3-3">3.3. Force Structure Analysis Components (Demand, Supply, Policy)</a></li>
<li><a href="#sec-3-4">3.4. Demand</a></li>
<li><a href="#sec-3-5">3.5. Supply</a></li>
<li><a href="#sec-3-6">3.6. Policy</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Rotational Analysis</a>
<ul>
<li><a href="#sec-4-1">4.1. Elements of Rotational Analysis</a></li>
<li><a href="#sec-4-2">4.2. Scoping</a></li>
<li><a href="#sec-4-3">4.3. Policy Assumptions</a></li>
<li><a href="#sec-4-4">4.4. Army Force Generation (ARFORGEN)</a></li>
<li><a href="#sec-4-5">4.5. ARFORGEN Intent</a></li>
<li><a href="#sec-4-6">4.6. ARFORGEN Lifecycle</a></li>
<li><a href="#sec-4-7">4.7. ARFORGEN Policy Example</a></li>
<li><a href="#sec-4-8">4.8. ARFORGEN Lifecycle Idealized</a></li>
<li><a href="#sec-4-9">4.9. Ideal ARFORGEN</a></li>
<li><a href="#sec-4-10">4.10. Static Rotational Analysis</a></li>
<li><a href="#sec-4-11">4.11. ARFORGEN Algebra</a></li>
<li><a href="#sec-4-12">4.12. Algebraic Form</a></li>
<li><a href="#sec-4-13">4.13. Practical Exercise: Theoretical Capacity</a></li>
<li><a href="#sec-4-14">4.14. Static Analysis Summary</a></li>
<li><a href="#sec-4-15">4.15. Real ARFORGEN</a></li>
<li><a href="#sec-4-16">4.16. Dynamic Rotational Analysis</a></li>
<li><a href="#sec-4-17">4.17. Dynamic Rotational Analysis Ctd.</a></li>
<li><a href="#sec-4-18">4.18. Dynamic Rotational Analysis Workflow</a></li>
</ul>
</li>
<li><a href="#sec-5">5. MARATHON (Modeling Army Rotation at Home or Not)</a>
<ul>
<li><a href="#sec-5-1">5.1. What is MARATHON?</a></li>
<li><a href="#sec-5-2">5.2. MARATHON Origin</a></li>
<li><a href="#sec-5-3">5.3. How Does MARATHON Work?</a></li>
<li><a href="#sec-5-4">5.4. MARATHON Demand and Fill</a></li>
<li><a href="#sec-5-5">5.5. MARATHON Policy</a></li>
<li><a href="#sec-5-6">5.6. MARATHON Entity Behavior</a></li>
<li><a href="#sec-5-7">5.7. Dynamic Rotational Analysis with MARATHON</a></li>
<li><a href="#sec-5-8">5.8. Dynamic Rotational Analysis Overview</a></li>
<li><a href="#sec-5-9">5.9. Requirements Analysis</a></li>
<li><a href="#sec-5-10">5.10. RA Example</a></li>
<li><a href="#sec-5-11">5.11. Capacity Analysis</a></li>
<li><a href="#sec-5-12">5.12. CA Example</a></li>
<li><a href="#sec-5-13">5.13. Portfolio Analysis</a></li>
<li><a href="#sec-5-14">5.14. PA Example</a></li>
</ul>
</li>
<li><a href="#sec-6">6. Using MARATHON</a>
<ul>
<li><a href="#sec-6-1">6.1. MARATHON Input</a></li>
<li><a href="#sec-6-2">6.2. MARATHON Input ctd.</a></li>
<li><a href="#sec-6-3">6.3. SupplyRecords</a></li>
<li><a href="#sec-6-4">6.4. DemandRecords</a></li>
<li><a href="#sec-6-5">6.5. PolicyRecords</a></li>
<li><a href="#sec-6-6">6.6. CompositePolicyRecords</a></li>
<li><a href="#sec-6-7">6.7. RelationRecords</a></li>
<li><a href="#sec-6-8">6.8. Remaining</a></li>
<li><a href="#sec-6-9">6.9. MARATHON Output</a></li>
<li><a href="#sec-6-10">6.10. MARATHON Interface</a></li>
</ul>
</li>
<li><a href="#sec-7">7. Practical Example: Notional Capacity</a>
<ul>
<li><a href="#sec-7-1">7.1. Practicale Example: Notional Capacity</a></li>
</ul>
</li>
<li><a href="#sec-8">8. Practical Example: Notional Requirements (Possibly Day 3)</a>
<ul>
<li><a href="#sec-8-1">8.1. Notional Requirements Analysis</a></li>
<li><a href="#sec-8-2">8.2. Analyze Results</a></li>
</ul>
</li>
<li><a href="#sec-9">9. Practical Example: Total Army Analysis</a>
<ul>
<li><a href="#sec-9-1">9.1. TAA Example</a></li>
<li><a href="#sec-9-2">9.2. Analytic Pipeline for TAA</a></li>
<li><a href="#sec-9-3">9.3. Representing Demand</a></li>
<li><a href="#sec-9-4">9.4. Demand ctd.</a></li>
<li><a href="#sec-9-5">9.5. TAA Supply</a></li>
<li><a href="#sec-9-6">9.6. TAA Policy</a></li>
</ul>
</li>
<li><a href="#sec-10">10. Day 2 - Clojure Orientation and Experimentation</a>
<ul>
<li><a href="#sec-10-1">10.1. Day 2 - Clojure Orientation and Experimentation</a></li>
</ul>
</li>
<li><a href="#sec-11">11. Rudimentals - Crawling</a>
<ul>
<li><a href="#sec-11-1">11.1. Development Environment</a></li>
<li><a href="#sec-11-2">11.2. Companion Clojure Project</a></li>
<li><a href="#sec-11-3">11.3. Expression</a></li>
<li><a href="#sec-11-4">11.4. Primitives</a></li>
<li><a href="#sec-11-5">11.5. Primitives ctd.</a></li>
<li><a href="#sec-11-6">11.6. Complex Expressions</a></li>
<li><a href="#sec-11-7">11.7. Vars</a></li>
<li><a href="#sec-11-8">11.8. Vectors Indicate Bindings</a></li>
<li><a href="#sec-11-9">11.9. Lexical Scope</a></li>
<li><a href="#sec-11-10">11.10. Functions</a></li>
<li><a href="#sec-11-11">11.11. Function Arity</a></li>
<li><a href="#sec-11-12">11.12. Function Composition</a></li>
<li><a href="#sec-11-13">11.13. Application with <code>apply</code></a></li>
<li><a href="#sec-11-14">11.14. Logical forms, <code>and</code>, <code>or</code>, <code>not</code></a></li>
<li><a href="#sec-11-15">11.15. "Truthiness"</a></li>
<li><a href="#sec-11-16">11.16. Conditional Control, <code>if</code>, <code>cond</code>, <code>case</code></a></li>
<li><a href="#sec-11-17">11.17. <code>if</code> Examples</a></li>
<li><a href="#sec-11-18">11.18. <code>cond</code>, <code>case</code></a></li>
<li><a href="#sec-11-19">11.19. Iteration with <code>loop/recur</code></a></li>
<li><a href="#sec-11-20">11.20. Iteration Example</a></li>
<li><a href="#sec-11-21">11.21. <code>do</code> things</a></li>
<li><a href="#sec-11-22">11.22. <code>eval</code> expressions</a></li>
<li><a href="#sec-11-23">11.23. Simple Input/Output Via <code>read</code>, <code>println</code></a></li>
<li><a href="#sec-11-24">11.24. Build your own REPL</a></li>
<li><a href="#sec-11-25">11.25. Practical Example: Guess The Number</a></li>
<li><a href="#sec-11-26">11.26. Guess The Number Ctd.</a></li>
<li><a href="#sec-11-27">11.27. Practical Example: Turtles</a></li>
</ul>
</li>
<li><a href="#sec-12">12. Rudimentals - Walking</a>
<ul>
<li><a href="#sec-12-1">12.1. Day 2 Walking</a></li>
<li><a href="#sec-12-2">12.2. Common Mathematical Functions</a></li>
<li><a href="#sec-12-3">12.3. More Function Composition</a></li>
<li><a href="#sec-12-4">12.4. Threading Macros for Functional Pipelines</a></li>
<li><a href="#sec-12-5">12.5. Threading Macros for Functional Pipelines Ctd.</a></li>
<li><a href="#sec-12-6">12.6. Sequences</a></li>
<li><a href="#sec-12-7">12.7. Basic Operations on Sequences</a></li>
<li><a href="#sec-12-8">12.8. Deriving New Sequences</a></li>
<li><a href="#sec-12-9">12.9. Sequence Comprehensions with <code>for</code></a></li>
<li><a href="#sec-12-10">12.10. More <code>for</code></a></li>
<li><a href="#sec-12-11">12.11. Pseudo-Iteration via <code>doseq</code>, <code>dotimes</code></a></li>
<li><a href="#sec-12-12">12.12. Constructing Sequences and Vectors</a></li>
<li><a href="#sec-12-13">12.13. Construction</a></li>
<li><a href="#sec-12-14">12.14. Indexed Access</a></li>
<li><a href="#sec-12-15">12.15. Building Sequences Manually With <code>lazy-seq</code></a></li>
<li><a href="#sec-12-16">12.16. <code>map</code>, <code>filter</code>, <code>reduce</code></a></li>
<li><a href="#sec-12-17">12.17. <code>map</code></a></li>
<li><a href="#sec-12-18">12.18. <code>filter</code></a></li>
<li><a href="#sec-12-19">12.19. <code>reduce</code></a></li>
<li><a href="#sec-12-20">12.20. <code>reduce</code> Examples</a></li>
<li><a href="#sec-12-21">12.21. Practical Example: FizzBuzz</a></li>
<li><a href="#sec-12-22">12.22. Maps and Sets</a></li>
<li><a href="#sec-12-23">12.23. Maps</a></li>
<li><a href="#sec-12-24">12.24. Maps ctd.</a></li>
<li><a href="#sec-12-25">12.25. Sets</a></li>
<li><a href="#sec-12-26">12.26. Strings Revisited and Regexes</a></li>
<li><a href="#sec-12-27">12.27. More Strings</a></li>
<li><a href="#sec-12-28">12.28. The Road So Far</a></li>
<li><a href="#sec-12-29">12.29. Useful Built-ins</a></li>
<li><a href="#sec-12-30">12.30. More Useful Built-ins</a></li>
<li><a href="#sec-12-31">12.31. IO (Input/Output)</a></li>
<li><a href="#sec-12-32">12.32. Simple File Operations</a></li>
<li><a href="#sec-12-33">12.33. Simple Tab-Delimited Files</a></li>
<li><a href="#sec-12-34">12.34. Lazy Tab-Delimited Files</a></li>
<li><a href="#sec-12-35">12.35. Printing Clojure Data to files</a></li>
<li><a href="#sec-12-36">12.36. IO In Practice</a></li>
<li><a href="#sec-12-37">12.37. Practical Example: Turtles Redux</a></li>
<li><a href="#sec-12-38">12.38. Practical Example: Simple statistics</a></li>
<li><a href="#sec-12-39">12.39. Practical Example: Project Euler (Possibly)</a></li>
</ul>
</li>
<li><a href="#sec-13">13. Day 3 - Extending MARATHON using Clojure (WIP)</a>
<ul>
<li><a href="#sec-13-1">13.1. Day 3 - Extending MARATHON using Clojure</a></li>
</ul>
</li>
<li><a href="#sec-14">14. Git Workflow / Version Control</a>
<ul>
<li><a href="#sec-14-1">14.1. Git and Version Control</a></li>
<li><a href="#sec-14-2">14.2. Init</a></li>
<li><a href="#sec-14-3">14.3. Clone</a></li>
<li><a href="#sec-14-4">14.4. Adding files</a></li>
<li><a href="#sec-14-5">14.5. Status</a></li>
<li><a href="#sec-14-6">14.6. Commit</a></li>
<li><a href="#sec-14-7">14.7. Push</a></li>
<li><a href="#sec-14-8">14.8. Simple and Effective Workflow</a></li>
</ul>
</li>
<li><a href="#sec-15">15. Hacking MARATHON</a>
<ul>
<li><a href="#sec-15-1">15.1. Learning About MARATHON</a></li>
<li><a href="#sec-15-2">15.2. Data Hooks</a></li>
<li><a href="#sec-15-3">15.3. Practical Example: marathon.demo</a></li>
<li><a href="#sec-15-4">15.4. Practical Example: Multiple Runs (batching)</a></li>
<li><a href="#sec-15-5">15.5. Practical Example: Programmatic Experiments</a></li>
<li><a href="#sec-15-6">15.6. Practical Example: Implement Requirements Analysis</a></li>
</ul>
</li>
<li><a href="#sec-16">16. Simple Scripting</a>
<ul>
<li><a href="#sec-16-1">16.1. Scripting Bonanza</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Overview</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Purpose</h3>
<div class="outline-text-3" id="text-1-1">
<p>
This is a preparatory outline of MARATHON training, specifically 
coverage of a 3-day time-line.  
</p>

<p>
The goal is to provide users with:
</p>
<ul class="org-ul">
<li>a conceptual understanding of MARATHON and rotational analysis
</li>
<li>a functional understanding of creating  MARATHON input data
</li>
<li>executing various forms of analyses
</li>
<li>extending MARATHON via scripting
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Agenda</h3>
<div class="outline-text-3" id="text-1-2">
<p>
The agenda is broken out over 3 days: 
</p>
<ul class="org-ul">
<li>Day-1 Background, Concepts, Data, Typical Analysis
</li>
<li>Day-2 Clojure Orientation (and Git)
</li>
<li>Day-3 Extending MARATHON with Clojure 
</li>
</ul>

<p>
The objective is for participants to gain a grounding in 
general rotational analysis topics, as well as the available 
tooling and models. 
</p>

<p>
Finally, we want to build tool-makers, not 
just tool-users, so you will be exposed to the programming language
<code>Clojure</code>, and shown how to automate analyses as well as build your 
own extensions.
</p>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Daily Schedule</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>Class hours will range from 0830-1630, with time off for lunch and 
periodic breaks.
</li>
<li>We will typically work exercises and activities into the
class to prevent mind-rot. 
</li>
<li>For the <code>Clojure</code> portions of the class, expect to spend
most of the time inside the <code>Clojure</code> REPL(Read Evaluate Print Loop).  
</li>
<li>Expect to type and interact.  
</li>
<li>Questions are generally welcome at any time, unless otherwise stated.    
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Prerequisites</h3>
<div class="outline-text-3" id="text-1-4">
<p>
This course is intended to provide a comprehensive overview of MARATHON, including 
its history (i.e. reason for existence), functionality, applicability, and means of 
extension.  No pre-requisite knowledge is required.
</p>

<p>
That being said, participants will benefit by reviewing references and 
materials based on interest, with the desire of 
</p>
<ul class="org-ul">
<li>Passing familiarity with Total Army Analysis
</li>
<li>Rudimentary familiarity with Microsoft Excel 
<ul class="org-ul">
<li>Creating and modifying workbooks, filtering, etc.
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Prerequisites Ctd.</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Rudimentary familiarity with the Clojure programming language
<ul class="org-ul">
<li>Familiarity with NightCode as a development environment (very very simple).
</li>
<li>Basic syntax
</li>
<li>The Read Evaluate Print Loop (REPL)
</li>
<li>Defining things.
</li>
<li>Defining functions.
</li>
<li>Working with collections, sequences.
</li>
</ul>
</li>
<li>Rudimentary familiarity with the Git version control system.  
<ul class="org-ul">
<li>cloning a repository.
</li>
<li>pulling from a repository.   
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Online References</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>Setting up NightCode
<ul class="org-ul">
<li>Getting Started With NightCode 
<a href="https://github.com/ClojureBridge/getting-started/blob/master/nightcode.md">https://github.com/ClojureBridge/getting-started/blob/master/nightcode.md</a>
</li>
</ul>
</li>
<li>Clojure 
<ul class="org-ul">
<li>Clojure Cheat Sheet <a href="http://grimoire.arrdem.com/">http://grimoire.arrdem.com/</a>
</li>
<li>ClojureBridge <a href="http://clojurebridge.github.io/curriculum/">http://clojurebridge.github.io/curriculum/</a>
</li>
<li>Clojure Distilled <a href="http://yogthos.github.io/ClojureDistilled.html">http://yogthos.github.io/ClojureDistilled.html</a>
</li>
<li>Clojure for the Brave and True  <a href="http://www.braveclojure.com/">http://www.braveclojure.com/</a>
</li>
</ul>
</li>
</ul>

<p>
(more at <a href="https://github.com/matthiasn/Clojure-Resources/blob/master/README.md">https://github.com/matthiasn/Clojure-Resources/blob/master/README.md</a>)
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Day 1 - Background Concepts, Data, Typical Analysis</h2>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Background Concepts</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Army Force Structure  (Background)</h3>
<div class="outline-text-3" id="text-3-1">
</div><ol class="org-ol"><li><a id="sec-3-1-1" name="sec-3-1-1"></a>Army force structure<br  /><div class="outline-text-4" id="text-3-1-1">
<ul class="org-ul">
<li>the set of equipment, personnel, and skills that define the US Army
</li>
<li>consists of a daunting set of interacting problems. 
</li>
<li>How do you build an army?
</li>
</ul>
</div>
</li>
<li><a id="sec-3-1-2" name="sec-3-1-2"></a>Designing an Army force structure<br  /><div class="outline-text-4" id="text-3-1-2">
<ul class="org-ul">
<li>consists of a daunting set of interacting problems. 
</li>
<li>To handle this fairly complicated process, the US Army regularly 
analyzes the shape and size of its force structure.
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Army Force Structure Analysis</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Analyses must deal with a wide range of force structure decisions, 
uncertainty about the future, and account for dynamics between force structure
decisions. 
</p>
</div>
<ol class="org-ol"><li><a id="sec-3-2-1" name="sec-3-2-1"></a>fundamental questions<br  /><div class="outline-text-4" id="text-3-2-1">
<ul class="org-ul">
<li>“What capabilities should the Army have?”
</li>
<li>“How should the Army allocate resources across capabilities?” 
</li>
</ul>
</div>
</li>
<li><a id="sec-3-2-2" name="sec-3-2-2"></a>Depend on a legion of contextual assumptions:<br  /><div class="outline-text-4" id="text-3-2-2">
<ul class="org-ul">
<li>budget constraints
</li>
<li>end-strength constraints
</li>
<li>National Security Strategy (NSS)
</li>
<li>regional stability 
</li>
<li>many more&#x2026;       
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Force Structure Analysis Components (Demand, Supply, Policy)</h3>
<div class="outline-text-3" id="text-3-3">
<p>
There are a number of practical concerns that will be addressed in any force structure analysis. 
</p>
<ul class="org-ul">
<li>Demand 
</li>
<li>Supply 
</li>
<li>Policy
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Demand</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Demand for Army force structure is fundamental to determining a force structure. 
</p>

<p>
Given an expected strategic environment, it is possible to derive a formal specification
for both the size and the shape of the force structure necessary to satisfy the
strategic goals of said environment, for notional example:
</p>
<ul class="org-ul">
<li>A portion of a warfight may requires the firepower of 1 IBCT, and lasts for 2 days.
</li>
<li>An emergency relief effort may require the HQ of 1 IBCT for 6 months.
</li>
</ul>

<p>
Demands also have additional considerations:
</p>
<ul class="org-ul">
<li>all force structure demands are not equal
</li>
<li>there typically exists some notion of value or priority
associated with specific scenarios.
<ul class="org-ul">
<li>ex. Large conflicts, or defense of the homeland, will likely take
an overriding priority over training operations.
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Supply</h3>
<div class="outline-text-3" id="text-3-5">
<p>
Army force structure is also determined by a complex system of legal,
budgetary, and political constraints, which correspond to a notion of
the supply of Army assets:
</p>

<ul class="org-ul">
<li>authorized end-strength for the Army,
which provides an upper bound on any feasible force structure.
</li>
<li>Some elements of supply may not be fungible, and act as constants in any force structure.
</li>
<li>exogenous political constraints abound,
and are usually outside the scope of most force structure analyses.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><span class="section-number-3">3.6</span> Policy</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Policy provides a set of relations between supply and demand,
as well as the constraints that determine the availability of supply.
</p>

<p>
Typically, policy constraints on supply availability are:
</p>
<ul class="org-ul">
<li>Readiness: 
<ul class="org-ul">
<li>A system for generating force structure
</li>
<li>Elements of the supply are ”made ready” for application against
relevant demands.
</li>
</ul>
</li>
<li>Substitutions: 
<ul class="org-ul">
<li>viable substitutions between different capabilities in the supply 
</li>
<li>the relative value (or cost) of applying substitute supply to demand.
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Rotational Analysis</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Elements of Rotational Analysis</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>Analysis typically relates supply to demand, constrained by policy
</li>
<li>Most analyses are variations of the roles played by each:
<ul class="org-ul">
<li>If we know supply, demand, and policy, we can vary policy.
</li>
<li>If we don't know supply, we can find possible supplies relative to 
demand and policy.
</li>
<li>Varying demand, holding policy and supply constant provides 
sensitivity analysis of the supply.
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Scoping</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Analysis typically focuses on a subset of the Force Generation process
</p>
<ul class="org-ul">
<li>generally holds many gross assumptions about the behavior of quite complex subsystems 
<ul class="org-ul">
<li>training,  manning, equipment, mobilization, etc.
</li>
</ul>
</li>
</ul>
<p>
Implications:
</p>
<ul class="org-ul">
<li>Scopes to unit level-of-detail
</li>
<li>complex subsystems like equipping and manning abstracted away 
<ul class="org-ul">
<li>or delegated to external models
</li>
</ul>
</li>
<li>variety of supply, demand, and policy options is still staggering.  
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Policy Assumptions</h3>
<div class="outline-text-3" id="text-4-3">
<p>
The policies for managing the force generation process have historically varied:
</p>
<ul class="org-ul">
<li>Tiered Readiness
</li>
<li>Cyclical Readiness 
</li>
<li>Mixtures
</li>
</ul>

<p>
Primary policies of note:
</p>
<ul class="org-ul">
<li>Army Force Generation (ARFORGEN)
<ul class="org-ul">
<li>Predominant policy for the last decade 
</li>
</ul>
</li>
<li>Sustainable Readiness Model (SRM)
<ul class="org-ul">
<li>Upcoming policy, replacement for ARFORGEN 
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Army Force Generation (ARFORGEN)</h3>
<div class="outline-text-3" id="text-4-4">
<p>
ARFORGEN is a system for managing <code>readiness</code> - the ability for units to deploy to meet contingencies.
</p>
<ul class="org-ul">
<li>contemporary cyclical force generation process
</li>
<li>structured progression of increased unit readiness over time
</li>
<li>results in the periodic availability of trained, ready and cohesive units 
<ul class="org-ul">
<li>prepared for operational deployment 
</li>
<li>support of civil authorities or combatant commander requirements.  
</li>
</ul>
</li>
<li>MARATHON was initially designed to analyze ARFORGEN
<ul class="org-ul">
<li>Capable of examining arbitrary policies (like SRM).
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> ARFORGEN Intent</h3>
<div class="outline-text-3" id="text-4-5">
</div><ol class="org-ol"><li><a id="sec-4-5-1" name="sec-4-5-1"></a>ARFORGEN seeks to<br  /><div class="outline-text-4" id="text-4-5-1">
<ul class="org-ul">
<li>synchronize individual sourcing, manning, equipping, and training processes 
</li>
<li>ensure a continuous supply of forces
</li>
<li>transition the Army from a system focused on surging forces to war to a system for sustained operations. 
</li>
</ul>
</div>
</li>
<li><a id="sec-4-5-2" name="sec-4-5-2"></a>The goal of ARFORGEN<br  /><div class="outline-text-4" id="text-4-5-2">
<ul class="org-ul">
<li>Provide a consistent and predictable supply of  units ready to deploy to meet contingencies.
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> ARFORGEN Lifecycle</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>Units accumulate resources and training as they accumulate time in the lifecycle,
</li>
<li>Progress through the abstract ARFORGEN phases: 
<ul class="org-ul">
<li>Reset, Train, Ready, and Available.  
</li>
</ul>
</li>

<li>At the beginning of a unit’s ARFORGEN lifecycle, the Reset phase, units
<ul class="org-ul">
<li>lack equipment, personnel, and training 
</li>
<li>lowest relative state of readiness.
</li>
</ul>
</li>

<li>In the available phase, units are
<ul class="org-ul">
<li>at the highest level of readiness
</li>
<li>best suited to deploy
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> ARFORGEN Policy Example</h3>
<div class="outline-text-3" id="text-4-7">

<div id="fig:policy" class="figure">
<p><img src="./images/ac9-15.png" alt="ac9-15.png" />
</p>
</div>

<div class="figure">
<p><img src="./images/ac12-36.png" alt="ac12-36.png" />
</p>
</div>

<div class="figure">
<p><img src="./images/rc12-48.png" alt="rc12-48.png" />
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> ARFORGEN Lifecycle Idealized</h3>
<div class="outline-text-3" id="text-4-8">
<p>
After the Available phase, units begin a new lifecycle
</p>
<ul class="org-ul">
<li>lose equipment, personnel, and readiness as they transition to the Reset phase.
</li>
</ul>

<p>
In theory, distributing units uniformly across ARFORGEN lifecycles – <code>an ideal ARFORGEN state</code> –
</p>
<ul class="org-ul">
<li>enforces equal opportunity for training, deploying, and resetting across the unit supply
</li>
<li>ensures a static (consistent) supply of units in each ARFORGEN phase.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> Ideal ARFORGEN</h3>
<div class="outline-text-3" id="text-4-9">

<div id="fig:SED-HR4049" class="figure">
<p><img src="./images/staticanalysis.png" alt="staticanalysis.png" />
</p>
<p><span class="figure-number">Figure 4:</span> Static Rotational Analysis and Ideal ARFORGEN</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-10" class="outline-3">
<h3 id="sec-4-10"><span class="section-number-3">4.10</span> Static Rotational Analysis</h3>
<div class="outline-text-3" id="text-4-10">
<p>
Given idealized assumptions:
</p>
<ul class="org-ul">
<li>Supply is "evenly" distributed across the lifecycle length
</li>
<li>Units are not deployed “out of cycle”
</li>
</ul>

<p>
Static rotational analysis examines force generation through
</p>
<ul class="org-ul">
<li>theoretical capacities
</li>
<li>variable rotational discounts
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-11" class="outline-3">
<h3 id="sec-4-11"><span class="section-number-3">4.11</span> ARFORGEN Algebra</h3>
<div class="outline-text-3" id="text-4-11">
<p>
<b>total rotational supply</b>
</p>
<ul class="org-ul">
<li>Quantity of units following the same policy.
</li>
</ul>
<p>
<b>rotational discount</b>
</p>
<ul class="org-ul">
<li>dimensionless quantity, 
</li>
<li>ranging between 0 and 1, 
</li>
<li>proportion of a unit’s available time relative to lifecycle time.
</li>
</ul>
<p>
<b>theoretical capacity</b> 
</p>
<ul class="org-ul">
<li>the expected number of units available at any time
</li>
</ul>
<p>
relative to a total rotational supply and a unit lifecycle 
</p>
<ul class="org-ul">
<li>calculated by discounting the total rotational supply.  
</li>
</ul>
<p>
<b>available time</b>
</p>
<ul class="org-ul">
<li>factors that increase available time (e.g. time in the available phase) 
</li>
</ul>
<p>
<b>overlap</b>
</p>
<ul class="org-ul">
<li>factors decreasing available days (e.g. time for rip/toa)
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-4-12" class="outline-3">
<h3 id="sec-4-12"><span class="section-number-3">4.12</span> Algebraic Form</h3>
<div class="outline-text-3" id="text-4-12">
\begin{equation}
RotationalDiscount= (available time - overlap) / lifecycle
\end{equation}
\begin{equation}
theoretical capacity =RotationalDiscount * total rotational supply
\end{equation}
</div>
<ol class="org-ol"><li><a id="sec-4-12-1" name="sec-4-12-1"></a>Drawbacks<br  /><div class="outline-text-4" id="text-4-12-1">
<ul class="org-ul">
<li>built upon ideal assumptions 
</li>
<li>perfect availability
</li>
</ul>
</div>
</li>
<li><a id="sec-4-12-2" name="sec-4-12-2"></a>ignores complexities of unit histories<br  /><div class="outline-text-4" id="text-4-12-2">
<ul class="org-ul">
<li>unit transformation periods
</li>
<li>changes to rotational policy
</li>
<li>lifecycle sequencing
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-4-13" class="outline-3">
<h3 id="sec-4-13"><span class="section-number-3">4.13</span> Practical Exercise: Theoretical Capacity</h3>
<div class="outline-text-3" id="text-4-13">
<p>
We have 30 AC BCTs following
</p>
<ul class="org-ul">
<li>a 24-month lifecycle
</li>
<li>12 months of availability 
</li>
<li>9 months of possible BOG 
</li>
<li>45 day RIP/TOA 
</li>
</ul>
<p>
And 30 NG BCTS following 
</p>
<ul class="org-ul">
<li>a 60-month lifecycle
</li>
<li>12 months of mobility 
</li>
<li>9 months possible BOG 
</li>
<li>3 months accounting for MOB/DeMOB 
</li>
<li>45 day RIP/TOA 
</li>
</ul>
<p>
Can we supply a 15 BCT steady-state demand? 
</p>
</div>
</div>
<div id="outline-container-sec-4-14" class="outline-3">
<h3 id="sec-4-14"><span class="section-number-3">4.14</span> Static Analysis Summary</h3>
<div class="outline-text-3" id="text-4-14">
<ul class="org-ul">
<li>Closed Form (Typically Algebraic)
</li>
<li>Ignores dynamics (i.e. temporal effects).
</li>
<li>Significant simplifying assumptions
<ul class="org-ul">
<li>Ex. Assume equilibrium under ARFORGEN
</li>
<li>results in fixed pools of supply in 
available, ready, reset states.
</li>
</ul>
</li>
<li>Useful for quick approximations
</li>
<li>Also useful for determining bounds.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-15" class="outline-3">
<h3 id="sec-4-15"><span class="section-number-3">4.15</span> Real ARFORGEN</h3>
<div class="outline-text-3" id="text-4-15">

<div id="fig:SED-HR4049" class="figure">
<p><img src="./images/dynamic.png" alt="dynamic.png" />
</p>
<p><span class="figure-number">Figure 5:</span> Dynamic Rotational Analysis and Real ARFORGEN</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-16" class="outline-3">
<h3 id="sec-4-16"><span class="section-number-3">4.16</span> Dynamic Rotational Analysis</h3>
<div class="outline-text-3" id="text-4-16">
<ul class="org-ul">
<li>Ideal ARFORGEN has yet to be achieved , let alone maintained
</li>
<li>static rotational analysis cannot validly answer questions about real ARFORGEN
<ul class="org-ul">
<li>state of supply, demand, and policy is dynamic, non-ideal
</li>
</ul>
</li>
<li>Dynamic rotational analysis (or dynamic analysis) accounts for
<ul class="org-ul">
<li>changes in the force generation system and non-ideal states
</li>
<li>bridges the gap between theoretical ideal and the empirical reality
</li>
<li>observation of supply, demand, or policy scenarios that vary as a function of time or event
</li>
<li>illuminates unforeseen consequences via second and third order effects
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4-17" class="outline-3">
<h3 id="sec-4-17"><span class="section-number-3">4.17</span> Dynamic Rotational Analysis Ctd.</h3>
<div class="outline-text-3" id="text-4-17">
<p>
Dynamic analysis utilizes some form of simulation, optimization, or difference equations to
generate multiple sequentially-dependent states of the rotational system.  
</p>
</div>

<ol class="org-ol"><li><a id="sec-4-17-1" name="sec-4-17-1"></a>System history is the primary output<br  /><div class="outline-text-4" id="text-4-17-1">
<ul class="org-ul">
<li>The sequence of states resulting from the application of a transition function
to an initial state.
</li>
<li>serves as the basis for multiple forms of focused analysis.
</li>
<li>allows for a more nuanced and contextual analysis
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-4-18" class="outline-3">
<h3 id="sec-4-18"><span class="section-number-3">4.18</span> Dynamic Rotational Analysis Workflow</h3>
<div class="outline-text-3" id="text-4-18">

<div id="fig:SED-HR4049" class="figure">
<p><img src="./images/dynamicworkflow.png" alt="dynamicworkflow.png" />
</p>
<p><span class="figure-number">Figure 6:</span> A possible workflow for dynamic analysis.</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> MARATHON (Modeling Army Rotation at Home or Not)</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> What is MARATHON?</h3>
<div class="outline-text-3" id="text-5-1">
</div><ol class="org-ol"><li><a id="sec-5-1-1" name="sec-5-1-1"></a>A mechanism for Dynamic Rotational Analysis where<br  /><div class="outline-text-4" id="text-5-1-1">
<ul class="org-ul">
<li>supply is a set of potentially deployable units
</li>
<li>demand is a set of activities requiring a unit
</li>
<li>policy is a collection of rules or constraints that determine a unit’s ability to fill a demand. 
</li>
</ul>
</div>
</li>
<li><a id="sec-5-1-2" name="sec-5-1-2"></a>MARATHON seeks to:<br  /><div class="outline-text-4" id="text-5-1-2">
<ul class="org-ul">
<li>validly simulate the "physics" of Army supply and demand
</li>
<li>governed by policy
</li>
<li>analyze the  effects of changes in supply,  demand, or policy.  
</li>
</ul>

<p>
Ultimately, MARATHON is an analytic sandbox for evaluating courses of action relative to Army Force Structure 
and Force Generation.
</p>
</div>
</li></ol>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> MARATHON Origin</h3>
<div class="outline-text-3" id="text-5-2">
<p>
CAA created MARATHON to analyze dynamic force management under ARFORGEN.  
</p>
<ul class="org-ul">
<li>MARATHON performs dynamic analysis through a combination of discrete-event simulation an on-line optimization.
<ul class="org-ul">
<li>simulates the deployment of rotational operating force units 
<ul class="org-ul">
<li>meet operational demands over time 
</li>
<li>based on specified ARFORGEN (or other) rotation policies.   
</li>
</ul>
</li>
</ul>
</li>
</ul>

<p>
Marathon illuminates the differences between theoretical rotational capacities, and rotational capacities stemming 
from non-static system conditions such as
</p>
<ul class="org-ul">
<li>historic deployments and surges
</li>
<li>dynamic changes in supply, policy, or demand.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> How Does MARATHON Work?</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Marathon simulates the force generation process through a coordinated set of supply, demand, and policy simulations.   
</p>
<ul class="org-ul">
<li>The supply system  coordinates 
<ul class="org-ul">
<li>unit availability,
</li>
<li>disseminating supply simulation events, 
</li>
<li>unit entity telemetry (position, location, etc.).  
</li>
</ul>
</li>
</ul>

<p>
Thousands of unique unit entities 
</p>
<ul class="org-ul">
<li>follow global (shared) or local (unique to the unit) rotational policies   
</li>
<li>are governed by one or more supply systems 
<ul class="org-ul">
<li>executes the “supply physics” dictated by the corresponding  policy. 
</li>
</ul>
</li>
<li>provide simulated histories that can be traced, recorded, and reacted to.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> MARATHON Demand and Fill</h3>
<div class="outline-text-3" id="text-5-4">
<p>
Demands are 
</p>
<ul class="org-ul">
<li>activated or deactivated
</li>
<li>slated for filling
</li>
<li>based on a - potentially sophisticated - user-defined priority function.
</li>
</ul>

<p>
The fill system 
</p>
<ul class="org-ul">
<li>matches the highest priority demand to the most suitable supply as needed,
</li>
<li>directs the transition of units from the supply system to deployments
</li>
<li>accounts for 
<ul class="org-ul">
<li>potentially complex unit substitution rules
</li>
<li>demand preferences
</li>
<li>almost any value function associated with the selection of units to fill demands. 
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> MARATHON Policy</h3>
<div class="outline-text-3" id="text-5-5">
<p>
Finally, a policy system accounts for changes to policy like
</p>
<ul class="org-ul">
<li>ARFORGEN suspension
</li>
<li>variation in lifecycle length 
</li>
<li>changes in deployment time
</li>
</ul>
<p>
by system-wide policy changes  
</p>
<ul class="org-ul">
<li>Policy changes automatically filter down to subscribing units, 
</li>
<li>enables a rich and diverse simulation of the supply-policy-demand dynamics.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="section-number-3">5.6</span> MARATHON Entity Behavior</h3>
<div class="outline-text-3" id="text-5-6">
<p>
Unit rotational policy generally consists of a directed sequence of states and durations. 
</p>
<ul class="org-ul">
<li>entirely modular and variable
</li>
</ul>

<p>
Units also have a variable behavior
</p>
<ul class="org-ul">
<li>interprets policy to implement the desired supply-side and deployed actions.  
</li>
</ul>

<p>
Decoupling behavior and policy allows for 
</p>
<ul class="org-ul">
<li>homogeneous sets of units that appear to behave identically
</li>
<li>diasporas of independent singletons that can apply similar behavior to different policies 
</li>
<li>or interpret the same policies (via different behavior) 
</li>
<li>simulating radically different populations with precise control
</li>
</ul>

<p>
The potential for unique entities allows flexibly account for
the legion of subtleties and corner-cases in rotational analysis. 
</p>
</div>
</div>

<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7"><span class="section-number-3">5.7</span> Dynamic Rotational Analysis with MARATHON</h3>
<div class="outline-text-3" id="text-5-7">
<p>
CAA uses Marathon to perform distinct classes of dynamic analysis:
</p>

<ul class="org-ul">
<li>Requirements Analysis
</li>
<li>Capacity Analysis
</li>
<li>Portfolio Analysis
</li>
</ul>

<p>
Given the three primary elements in any rotational analysis – supply, demand, and policy – 
we can perform different classes of analysis by treating the elements as unknowns (i.e. variables) 
</p>
<ul class="org-ul">
<li>determined through experimentation or calculation.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-8" class="outline-3">
<h3 id="sec-5-8"><span class="section-number-3">5.8</span> Dynamic Rotational Analysis Overview</h3>
<div class="outline-text-3" id="text-5-8">

<div id="fig:SED-HR4049" class="figure">
<p><img src="./images/marover.png" alt="marover.png" />
</p>
<p><span class="figure-number">Figure 7:</span> Dynamic Rotational Analysis</p>
</div>
</div>
</div>
<div id="outline-container-sec-5-9" class="outline-3">
<h3 id="sec-5-9"><span class="section-number-3">5.9</span> Requirements Analysis</h3>
<div class="outline-text-3" id="text-5-9">
<ul class="org-ul">
<li>Requirements Analysis treats supply as an unknown
<ul class="org-ul">
<li>searches the space of force structure allocations that result in a minimum feasible supply 
</li>
<li>relative to a known demand and policy.  
</li>
<li>minimum feasible supply is capable of meeting the entirety of the demand.  
</li>
<li>answers the question: “How large a force does the Army need in this context? ”
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-5-10" class="outline-3">
<h3 id="sec-5-10"><span class="section-number-3">5.10</span> RA Example</h3>
<div class="outline-text-3" id="text-5-10">

<div id="fig:SED-HR4049" class="figure">
<p><img src="./images/requirementsalgo.png" alt="requirementsalgo.png" />
</p>
<p><span class="figure-number">Figure 8:</span> Requirements Analysis Algorithm</p>
</div>
</div>
</div>
<div id="outline-container-sec-5-11" class="outline-3">
<h3 id="sec-5-11"><span class="section-number-3">5.11</span> Capacity Analysis</h3>
<div class="outline-text-3" id="text-5-11">
<p>
Capacity Analysis treats supply, demand, and policy as known.  
</p>
<ul class="org-ul">
<li>unknown variable is the performance of the rotational supply
<ul class="org-ul">
<li>the effective rotational capacity of the supply relative to demand constrained by policy. 
</li>
</ul>
</li>
<li>Performance is measured in a variety of ways
<ul class="org-ul">
<li>unit dwell 
</li>
<li>demand fill. 
</li>
</ul>
</li>
<li>answers the question “How much can the Army do with a particular force?”
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-5-12" class="outline-3">
<h3 id="sec-5-12"><span class="section-number-3">5.12</span> CA Example</h3>
<div class="outline-text-3" id="text-5-12">

<div id="fig:SED-HR4049" class="figure">
<p><img src="./images/dwellplot.png" alt="dwellplot.png" />
</p>
<p><span class="figure-number">Figure 9:</span> Dwell Before Deployment</p>
</div>
</div>
</div>
<div id="outline-container-sec-5-13" class="outline-3">
<h3 id="sec-5-13"><span class="section-number-3">5.13</span> Portfolio Analysis</h3>
<div class="outline-text-3" id="text-5-13">
<p>
Portfolio Analysis is higher-order form of analysis
</p>
<ul class="org-ul">
<li>uses Requirements Analysis and Capacity Analysis
<ul class="org-ul">
<li>respectively generate and evaluate multiple  supplies - the portfolio
</li>
</ul>
</li>
<li>may treat both supply and demand as variables. 
</li>
<li>recent applications of Portfolio Analysis focus on building and evaluating portfolios relative to stochastic demands.
</li>
<li>answers the question: 
<ul class="org-ul">
<li>“Given a plethora of possible demand inputs, 
what kind of force structure would have robust performance across the inputs?”
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-5-14" class="outline-3">
<h3 id="sec-5-14"><span class="section-number-3">5.14</span> PA Example</h3>
<div class="outline-text-3" id="text-5-14">

<div id="fig:SED-HR4049" class="figure">
<p><img src="./images/portfolioalgo.png" alt="portfolioalgo.png" />
</p>
<p><span class="figure-number">Figure 10:</span> Capacity Analysis</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Using MARATHON</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> MARATHON Input</h3>
<div class="outline-text-3" id="text-6-1">
</div><ol class="org-ol"><li><a id="sec-6-1-1" name="sec-6-1-1"></a>Generic<br  /><div class="outline-text-4" id="text-6-1-1">
<ul class="org-ul">
<li>Parameters 
<ul class="org-ul">
<li>Key / Value pairs of simple data.
</li>
<li>Define simple toggles, facts, defaults.
</li>
</ul>
</li>
</ul>
</div>
</li>
<li><a id="sec-6-1-2" name="sec-6-1-2"></a>Supply<br  /><div class="outline-text-4" id="text-6-1-2">
<ul class="org-ul">
<li>SupplyRecords
<ul class="org-ul">
<li>Define individual or batches of unit entities.
</li>
</ul>
</li>
</ul>
</div>
</li>
<li><a id="sec-6-1-3" name="sec-6-1-3"></a>Demand<br  /><div class="outline-text-4" id="text-6-1-3">
<ul class="org-ul">
<li>DemandRecords 
<ul class="org-ul">
<li>Define demand entities.
</li>
</ul>
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> MARATHON Input ctd.</h3>
<div class="outline-text-3" id="text-6-2">
</div><ol class="org-ol"><li><a id="sec-6-2-1" name="sec-6-2-1"></a>Policy<br  /><div class="outline-text-4" id="text-6-2-1">
<ul class="org-ul">
<li>PolicyRecords
<ul class="org-ul">
<li>Parametric sets of policies compiled at runtime
</li>
</ul>
</li>
<li>CompositePolicyRecords 
<ul class="org-ul">
<li>Data-driven compositions of policies defined by PolicyRecords
</li>
</ul>
</li>
<li>RelationRecords 
<ul class="org-ul">
<li>Weighted substitution relationships.
</li>
</ul>
</li>
<li>SRCTagRecords
<ul class="org-ul">
<li>Defines "alternate" policy defaults for specific SRCs.
</li>
</ul>
</li>
<li>PeriodRecords 
<ul class="org-ul">
<li>Defines named simulation epochs, by time interval.
</li>
<li>Periods may be linked to changes in composite policies.
</li>
</ul>
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> SupplyRecords</h3>
<div class="outline-text-3" id="text-6-3">
</div><ol class="org-ol"><li><a id="sec-6-3-1" name="sec-6-3-1"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-6-3-1">
<ul class="org-ul">
<li>Type :text 
</li>
<li>Enabled :boolean 
</li>
<li>Quantity :int 
</li>
<li>SRC :text 
</li>
<li>Component :text 
</li>
<li>OITitle :text 
</li>
<li>Name :text 
</li>
<li>Behavior :text 
</li>
<li>CycleTime :int 
</li>
<li>Policy :text 
</li>
</ul>
</div>
</li>
<li><a id="sec-6-3-2" name="sec-6-3-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-6-3-2">
<ul class="org-ul">
<li>Tags :clojure 
</li>
<li>SpawnTime :int 
</li>
<li>Location :text 
</li>
<li>Position :text 
</li>
<li>Original :boolean 
</li>
<li>Command :text 
</li>
<li>Origin :text 
</li>
<li>Duration :int?
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> DemandRecords</h3>
<div class="outline-text-3" id="text-6-4">
</div><ol class="org-ol"><li><a id="sec-6-4-1" name="sec-6-4-1"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-6-4-1">
<ul class="org-ul">
<li>Type :text 
</li>
<li>Enabled :boolean 
</li>
<li>Priority :int 
</li>
<li>Quantity :int 
</li>
<li>DemandIndex :int 
</li>
<li>StartDay :int 
</li>
<li>Duration :int 
</li>
<li>Overlap :int 
</li>
<li>SRC :text 
</li>
<li>SourceFirst :text 
</li>
<li>DemandGroup :text 
</li>
<li>Vignette :text 
</li>
</ul>
</div>
</li>
<li><a id="sec-6-4-2" name="sec-6-4-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-6-4-2">
<ul class="org-ul">
<li>Operation :text 
</li>
<li>Category :text 
</li>
<li>Priority :int 
</li>
<li>Command :text 
</li>
<li>Location :text 
</li>
<li>DemandType :text 
</li>
<li>Theater :text 
</li>
<li>BOG :boolean 
</li>
<li>StartState :text 
</li>
<li>EndState :text 
</li>
<li>MissionLength :int? 
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5"><span class="section-number-3">6.5</span> PolicyRecords</h3>
<div class="outline-text-3" id="text-6-5">
</div><ol class="org-ol"><li><a id="sec-6-5-1" name="sec-6-5-1"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-6-5-1">
<ul class="org-ul">
<li>TimeStamp :text 
</li>
<li>Type :text 
</li>
<li>TimeInterval :text 
</li>
<li>PolicyName :text 
</li>
<li>Template :text 
</li>
<li>MaxDwell :int 
</li>
<li>MinDwell :int 
</li>
<li>MaxBOG :int
</li>
</ul>
</div>
</li>
<li><a id="sec-6-5-2" name="sec-6-5-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-6-5-2">
<ul class="org-ul">
<li>StartDeployable :int 
</li>
<li>StopDeployable :int 
</li>
<li>Overlap :int 
</li>
<li>Recovery :int 
</li>
<li>BOGBudget :text 
</li>
<li>Deltas :text 
</li>
<li>Remarks :text 
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6"><span class="section-number-3">6.6</span> CompositePolicyRecords</h3>
<div class="outline-text-3" id="text-6-6">
<ul class="org-ul">
<li>Type :text 
</li>
<li>CompositeName :text 
</li>
<li>CompositionType :text 
</li>
<li>Period :text 
</li>
<li>Policy :text 
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7"><span class="section-number-3">6.7</span> RelationRecords</h3>
<div class="outline-text-3" id="text-6-7">
<ul class="org-ul">
<li>Type :text 
</li>
<li>Relation :text 
</li>
<li>Donor :text 
</li>
<li>Recepient :text 
</li>
<li>Cost :float 
</li>
<li>Enabled :boolean 
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-6-8" class="outline-3">
<h3 id="sec-6-8"><span class="section-number-3">6.8</span> Remaining</h3>
<div class="outline-text-3" id="text-6-8">
</div><ol class="org-ol"><li><a id="sec-6-8-1" name="sec-6-8-1"></a>PeriodRecords<br  /><div class="outline-text-4" id="text-6-8-1">
<ul class="org-ul">
<li>Type :text 
</li>
<li>Name :text 
</li>
<li>FromDay :int 
</li>
<li>ToDay :int 
</li>
</ul>
</div>
</li>
<li><a id="sec-6-8-2" name="sec-6-8-2"></a>SRCTagRecords<br  /><div class="outline-text-4" id="text-6-8-2">
<ul class="org-ul">
<li>Type :text 
</li>
<li>SRC :text 
</li>
<li>Tag :text 
</li>
</ul>
</div>
</li>
<li><a id="sec-6-8-3" name="sec-6-8-3"></a>Parameters<br  /><div class="outline-text-4" id="text-6-8-3">
<ul class="org-ul">
<li>ParameterName :text 
</li>
<li>Value :text 
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-6-9" class="outline-3">
<h3 id="sec-6-9"><span class="section-number-3">6.9</span> MARATHON Output</h3>
<div class="outline-text-3" id="text-6-9">
<ul class="org-ul">
<li>Deployments 
<ul class="org-ul">
<li>individual unit deployments
</li>
</ul>
</li>
<li>DemandTrends 
<ul class="org-ul">
<li>discrete sampling of changes in demand
</li>
</ul>
</li>
<li>Deployed 
<ul class="org-ul">
<li>daily sampling of the deployed population
</li>
</ul>
</li>
<li>Locations 
<ul class="org-ul">
<li>daily sampling of evey unit's location.
</li>
</ul>
</li>
<li>History
<ul class="org-ul">
<li>compressed stream of simulation history
</li>
<li>we can compute more ouput on this later
</li>
</ul>
</li>
<li>Much more if we use <code>proc</code> for post processing&#x2026;
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-6-10" class="outline-3">
<h3 id="sec-6-10"><span class="section-number-3">6.10</span> MARATHON Interface</h3>
<div class="outline-text-3" id="text-6-10">
</div><ol class="org-ol"><li><a id="sec-6-10-1" name="sec-6-10-1"></a>Menus<br  /></li>
<li><a id="sec-6-10-2" name="sec-6-10-2"></a>REPL<br  /></li></ol>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Practical Example: Notional Capacity</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> Practicale Example: Notional Capacity</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>Look at "srmbase" project.
<ul class="org-ul">
<li>Examine Supply, Demand, Policy    
</li>
</ul>
</li>
<li>Processing -&gt; Capacity Analysis.
</li>
<li>Analyze results the "hard" way
<ul class="org-ul">
<li>Use Excel (and the provided template) to pull in data.
</li>
<li>Are we filling demands according to the data?
</li>
<li>What do we know about stress on the supply based on dwell?
</li>
<li>Any other observations?
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Practical Example: Notional Requirements (Possibly Day 3)</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> Notional Requirements Analysis</h3>
</div>
<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> Analyze Results</h3>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Practical Example: Total Army Analysis</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> TAA Example</h3>
</div>
<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> Analytic Pipeline for TAA</h3>
<div class="outline-text-3" id="text-9-2">
<p>
The Army favors a pipelined approach for large-scale force structure analysis. 
This analytic pipeline serves as a mechanism for composing processes - primarily simulations
</p>
<ul class="org-ul">
<li>spanning varying levels of detail and analytic domains. 
</li>

<li>complex simulations that represent Army doctrine and business rules
<ul class="org-ul">
<li>system simulations
</li>
<li>tactical combat model 
</li>
<li>campaign level combat models  
</li>
</ul>
</li>
<li>deterministic optimization models
<ul class="org-ul">
<li>mobility
</li>
<li>flow models
</li>
<li>equipping 
</li>
<li>personnel assignment
</li>
</ul>
</li>
<li>Wargaming 
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> Representing Demand</h3>
<div class="outline-text-3" id="text-9-3">
</div><ol class="org-ol"><li><a id="sec-9-3-1" name="sec-9-3-1"></a>The majority of the pipeline exists to build a valid <code>demand future</code>:<br  /><div class="outline-text-4" id="text-9-3-1">
<ul class="org-ul">
<li>a set of force structure requirements defined over time.
</li>
<li>distills high-fidelity, large-scale, and complex campaign analysis
</li>
<li>produces  a relatively simple set of time-varying demands for force structure.
</li>
</ul>
</div>
</li>
<li><a id="sec-9-3-2" name="sec-9-3-2"></a><code>Surge</code> demand signal(s) are the primary modeling effort:<br  /><div class="outline-text-4" id="text-9-3-2">
<ul class="org-ul">
<li>Driven by Army doctrine, combat models, and Rules of Allocation for support structure, etc.
</li>
<li>Conveys the assumptions, constraints, and findings of the entire pipeline.
</li>
<li>Typically large-scale, important contingency events.
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4"><span class="section-number-3">9.4</span> Demand ctd.</h3>
<div class="outline-text-3" id="text-9-4">
</div><ol class="org-ol"><li><a id="sec-9-4-1" name="sec-9-4-1"></a>Smaller demands, aka <code>vignettes</code>, also show up:<br  /><div class="outline-text-4" id="text-9-4-1">
<ul class="org-ul">
<li>vignettes manifest as force structure lists
</li>
<li>typically developed by wargaming vs. modeling.
</li>
<li>derived from the Support to Strategic Analysis (SSA) process.
</li>
</ul>
</div>
</li>
<li><a id="sec-9-4-2" name="sec-9-4-2"></a>Demands are selected and arranged according to timing:<br  /><div class="outline-text-4" id="text-9-4-2">
<ul class="org-ul">
<li>Demands are building blocks, the timing arranges them.
</li>
<li>Resulting arrangement is assumed to be a valid representation of expected 
force structure demand
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-9-5" class="outline-3">
<h3 id="sec-9-5"><span class="section-number-3">9.5</span> TAA Supply</h3>
<div class="outline-text-3" id="text-9-5">
</div><ol class="org-ol"><li><a id="sec-9-5-1" name="sec-9-5-1"></a>Supply is typically provided by the sponsor.<br  /><div class="outline-text-4" id="text-9-5-1">
<ul class="org-ul">
<li>Derived from projected force structure.
</li>
<li>Typically multiple supply excursions.
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-9-6" class="outline-3">
<h3 id="sec-9-6"><span class="section-number-3">9.6</span> TAA Policy</h3>
<div class="outline-text-3" id="text-9-6">
</div><ol class="org-ol"><li><a id="sec-9-6-1" name="sec-9-6-1"></a>Policy is typically provided by the sponsor.<br  /><div class="outline-text-4" id="text-9-6-1">
<ul class="org-ul">
<li>Historically MaxUtilization and variants.
</li>
</ul>
</div>
</li></ol>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Day 2 - Clojure Orientation and Experimentation</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> Day 2 - Clojure Orientation and Experimentation</h3>
<div class="outline-text-3" id="text-10-1">
<ul class="org-ul">
<li>We're going to get familiar with clojure.
</li>
<li>Enough to make you "dangerous," ideally able to continue on your own.
<ul class="org-ul">
<li>Teach someone to fish&#x2026;
</li>
</ul>
</li>
<li>Goal is to cement familiarity, not expertise.
<ul class="org-ul">
<li>Core concepts, big ideas
</li>
<li>Most importantly, things you will/can use in day-to-day tasks
</li>
<li>View clojure as a force multiplier
</li>
</ul>
</li>
<li>Aim to build incrementally, starting with primitive topics
<ul class="org-ul">
<li>Crawl, walk, run.
</li>
</ul>
</li>
<li>We will short-change a lot of really cool, beautiful topics out of 
pragmatism.
<ul class="org-ul">
<li>Macros, homoiconicity, dynamic scope, domain-specific-languages, 
communicating sequential processes, software transactional memory, more.
</li>
<li>Ask for references if you're interested in pursuing this.
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Rudimentals - Crawling</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1"><span class="section-number-3">11.1</span> Development Environment</h3>
<div class="outline-text-3" id="text-11-1">
</div><ol class="org-ol"><li><a id="sec-11-1-1" name="sec-11-1-1"></a>NightCode<br  /><div class="outline-text-4" id="text-11-1-1">
<ul class="org-ul">
<li>Should already be loaded and rolling.
</li>
<li>Holler if you're having problems.
</li>
<li>Simple interface
-Syntax highlighting  / parenthesis balancing (really helpful)
-Portable (implemented in Java/Clojure) 
</li>
</ul>
</div>
</li>
<li><a id="sec-11-1-2" name="sec-11-1-2"></a>Not the only way to go<br  /><div class="outline-text-4" id="text-11-1-2">
<ul class="org-ul">
<li>Emacs is superior of course    
</li>
<li>Vim is a heretical alternative
</li>
<li>Cursive Clojure, Eclipse also have market share
<ul class="org-ul">
<li>People seem to really like Cursive, based on IntelliJ Idea
</li>
</ul>
</li>
</ul>
</div>
</li></ol>
</div>

<div id="outline-container-sec-11-2" class="outline-3">
<h3 id="sec-11-2"><span class="section-number-3">11.2</span> Companion Clojure Project</h3>
<div class="outline-text-3" id="text-11-2">
</div><ol class="org-ol"><li><a id="sec-11-2-1" name="sec-11-2-1"></a>REPL<br  /><div class="outline-text-4" id="text-11-2-1">
<ul class="org-ul">
<li>This is our new home for today  
</li>
<li>(doc &#x2026;) is your friend. 
</li>
</ul>
</div>
</li>
<li><a id="sec-11-2-2" name="sec-11-2-2"></a>Clojure project called "training"<br  /><div class="outline-text-4" id="text-11-2-2">
<ul class="org-ul">
<li>pre-loaded 
</li>
<li>contains all dependencies
</li>
<li>expounds upon slides / conversation 
</li>
<li>Designed for REPL-based learning.
</li>
</ul>
</div>
</li>
<li><a id="sec-11-2-3" name="sec-11-2-3"></a>Questions are good<br  /><div class="outline-text-4" id="text-11-2-3">
<ul class="org-ul">
<li>Ask anytime   
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-11-3" class="outline-3">
<h3 id="sec-11-3"><span class="section-number-3">11.3</span> Expression</h3>
<div class="outline-text-3" id="text-11-3">
</div><ol class="org-ol"><li><a id="sec-11-3-1" name="sec-11-3-1"></a>Clojure is a language, like English<br  /><div class="outline-text-4" id="text-11-3-1">
<ul class="org-ul">
<li>where we - hopefully - can 
easily express useful bits of information 
</li>
<li>elegantly and efficiently. 
</li>
</ul>
</div>
</li>
<li><a id="sec-11-3-2" name="sec-11-3-2"></a>Interaction with the REPL is a conversation.<br  /><div class="outline-text-4" id="text-11-3-2">
<ul class="org-ul">
<li>Other side speaks / reads Clojure.
</li>
<li>Our goal is to learn to express ourselves (or our problems) 
</li>
<li>Ideally in terms humans can understand without too much trouble.
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-11-4" class="outline-3">
<h3 id="sec-11-4"><span class="section-number-3">11.4</span> Primitives</h3>
<div class="outline-text-3" id="text-11-4">
<p>
Booleans
</p>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #BFEBBF;">true</span>, <span style="color: #BFEBBF;">false</span>
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">nil</span>
<span style="color: #BFEBBF;">nil</span>
</pre>
</div>
<p>
Characters
</p>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #CC9393;">\a</span>, <span style="color: #CC9393;">\b</span>, <span style="color: #CC9393;">\c</span>, <span style="color: #CC9393;">\d</span>, <span style="color: #CC9393;">\e</span>, <span style="color: #CC9393;">\f</span>, <span style="color: #CC9393;">\g</span>
</pre>
</div>
<p>
Strings
</p>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #CC9393;">"I am a string"</span>
(seq <span style="color: #CC9393;">"I contain characters"</span>)
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">(\I \space \c \o \n \t \a \i \n </span>
<span style="color: #5F7F5F;">;  </span><span style="color: #7F9F7F;">\space \c \h \a \r \a \c \t \e \r \s)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-5" class="outline-3">
<h3 id="sec-11-5"><span class="section-number-3">11.5</span> Primitives ctd.</h3>
<div class="outline-text-3" id="text-11-5">
</div><ol class="org-ol"><li><a id="sec-11-5-1" name="sec-11-5-1"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-11-5-1">
<p>
Integers
</p>
<div class="org-src-container">

<pre class="src src-clojure">1, 2, 3
100000000000
</pre>
</div>
<p>
Floats
</p>
<div class="org-src-container">

<pre class="src src-clojure">1000.2
42.42
10.1e100
</pre>
</div>
<p>
Ratios
</p>
<div class="org-src-container">

<pre class="src src-clojure">42/5
33/2
</pre>
</div>
</div>
</li>

<li><a id="sec-11-5-2" name="sec-11-5-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-11-5-2">
<p>
Keywords
</p>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #BFEBBF;">:a</span>
<span style="color: #BFEBBF;">:b</span>
<span style="color: #BFEBBF;">:this-is-a-keyword</span>
<span style="color: #BFEBBF;">:THISisALSOaKEYWORD</span>
</pre>
</div>
<p>
Quoted Symbols
</p>
<div class="org-src-container">

<pre class="src src-clojure">'2
'<span style="color: #CC9393;">"three"</span>
'x
'this-is-a-symbol
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-11-6" class="outline-3">
<h3 id="sec-11-6"><span class="section-number-3">11.6</span> Complex Expressions</h3>
<div class="outline-text-3" id="text-11-6">
<p>
Lists are fundamental means of expression.
</p>
<ul class="org-ul">
<li>Denoted by outer parenthesis ()
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(this is a list)
</pre>
</div>
<p>
Quoted Lists are data.
</p>
<div class="org-src-container">

<pre class="src src-clojure">'(+ 2 3)
</pre>
</div>
<p>
Unquoted Lists passed to the REPL are 
evaluated as "forms", clojure expressions.
</p>
<ul class="org-ul">
<li>First element is evaluated
</li>
<li>Applied to the remaining evaluated elements.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(+ 2 3)  <span style="color: #7F9F7F;">;=&gt;5</span>
(list 1 2) <span style="color: #7F9F7F;">;=&gt; (1 2)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-7" class="outline-3">
<h3 id="sec-11-7"><span class="section-number-3">11.7</span> Vars</h3>
<div class="outline-text-3" id="text-11-7">
<p>
Symbols must be defined, i.e. bound, to 
some value.  
</p>
<ul class="org-ul">
<li>Bound symbols are called vars.
</li>
<li>Use the <code>def</code> form to define global vars.
</li>
<li>Use the <code>let</code> form to establish local 
bindings.
</li>
<li>vars evaluate to the value they were 
associated with at definition time.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">x</span> 2) 
(<span style="color: #F0DFAF; font-weight: bold;">let</span> [y 10]
  (+ x y))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">=&gt; 12</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-8" class="outline-3">
<h3 id="sec-11-8"><span class="section-number-3">11.8</span> Vectors Indicate Bindings</h3>
<div class="outline-text-3" id="text-11-8">
<p>
Vectors provide another way to collect things:
</p>
<ul class="org-ul">
<li>Denoted by []
</li>
<li>Provide numerous benefits as a data structure
</li>
</ul>
<p>
Never interpreted as forms, always treated as data.
</p>
<ul class="org-ul">
<li>Used instead of quoted lists.
</li>
<li>Required by core libraries to indicate var bindings.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">[0 1 2 3 4]
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">=&gt; [0 1 2 3 4]</span>
[<span style="color: #BFEBBF;">:a</span> 2]
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">=&gt; [:a 2]</span>
(vector <span style="color: #CC9393;">"build"</span> <span style="color: #CC9393;">"me"</span>)
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">=&gt;["build" "me"]</span>
(<span style="color: #F0DFAF; font-weight: bold;">let</span> [x 2] x)
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">=&gt;2</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-9" class="outline-3">
<h3 id="sec-11-9"><span class="section-number-3">11.9</span> Lexical Scope</h3>
<div class="outline-text-3" id="text-11-9">
<p>
Vars are lexically scoped.
</p>
<ul class="org-ul">
<li>Only visible within the body of 
the context in which they're bound (lexical environment).
</li>
<li>Undefined vars (i.e. unquoted symbols) trigger exceptions.
</li>
<li>Inner bindings can "shadow", or override outer bindings in 
the lexical scope of the inner binding.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">state</span> <span style="color: #9FC59F;">"Texas"</span>) 
(<span style="color: #F0DFAF; font-weight: bold;">let</span> [state <span style="color: #CC9393;">"Virginia"</span>]
  state) <span style="color: #7F9F7F;">;=&gt; "Virginia"       </span>
state <span style="color: #7F9F7F;">;=&gt; "Texas"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-10" class="outline-3">
<h3 id="sec-11-10"><span class="section-number-3">11.10</span> Functions</h3>
<div class="outline-text-3" id="text-11-10">
<p>
Functions are the bread-and-butter of 
getting stuff done in clojure.
</p>
<ul class="org-ul">
<li>Along with lists (forms).
</li>
</ul>
<p>
Define anonymous functions with (fn [&amp; args] body) form.
</p>
<div class="org-src-container">

<pre class="src src-clojure">((<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (+ x 2)) 2)
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">=&gt; 4</span>
</pre>
</div>
<p>
Define named functions
</p>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">add-two</span> (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (+ x 2))) 
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">same result, with a docstring..</span>
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">add-two</span> <span style="color: #9FC59F;">"Add two to the input"</span> 
  [x] (+ x 2))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-11" class="outline-3">
<h3 id="sec-11-11"><span class="section-number-3">11.11</span> Function Arity</h3>
<div class="outline-text-3" id="text-11-11">
<p>
Functions can have multiple "arities", or argument bindings.
</p>
<ul class="org-ul">
<li>Use a list of ([bindings] body) for each arity.
</li>
<li>Denote "list" of arguments with [&amp; something]
<ul class="org-ul">
<li>Tells clojure to collect the items after &amp; and dump them into a list
bound to "something"
</li>
<li>Example of destructuring, more on this later.
</li>
</ul>
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">variadic</span> 
  ([x] 
     (println (str <span style="color: #CC9393;">"you called me with 1 arg, "</span> x)))
  ([x y] 
     (println (str <span style="color: #CC9393;">"you called me with 2 args: "</span> [x y])))
  ([x y &amp; more] 
     (println (str <span style="color: #CC9393;">"you called me with &gt;2 args: "</span> (into [x y] more)))))
(variadic 1) <span style="color: #7F9F7F;">;=&gt; you called me with 1 args: 1</span>
(variadic 1 2) <span style="color: #7F9F7F;">;=&gt; you called me with 2 args: [1 2]</span>
(variadic 1 2 3 4 5 6) <span style="color: #7F9F7F;">;=&gt; you called me with &gt;2 args: [1 2 3 4]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-12" class="outline-3">
<h3 id="sec-11-12"><span class="section-number-3">11.12</span> Function Composition</h3>
<div class="outline-text-3" id="text-11-12">
<p>
Functions are a useful abstraction because they
compose easily.
</p>
<ul class="org-ul">
<li>Style of programming called "functional programming"
</li>
<li>Underlying philosophy in clojure.
</li>
<li>Define complex functions by composing simple functions.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">square</span> [x] (* x x))
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">distance</span> [[x1 y1] [x2 y2]] 
 (<span style="color: #7CB8BB;">Math</span>/sqrt (square (- x2 x1)) 
            (square (- y2 y1))))
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">normal</span> [[x y]] 
 (<span style="color: #F0DFAF; font-weight: bold;">let</span> [d (distance [0 0] [x y])]
   [(/ x d) (/ y d)]))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-13" class="outline-3">
<h3 id="sec-11-13"><span class="section-number-3">11.13</span> Application with <code>apply</code></h3>
<div class="outline-text-3" id="text-11-13">
<p>
We can use the <code>apply</code> form to apply a function to a 
sequence of arguments 
</p>
<ul class="org-ul">
<li>as if the function were invoked with the arguments.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(apply + [1 2])
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">3</span>
(apply * [2 4 6 8])
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">384</span>
(apply * '(0.5 0.5 0.5))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">0.125</span>
(apply list [1 2 3 4 5 6])
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">(1 2 3 4 5 6)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-14" class="outline-3">
<h3 id="sec-11-14"><span class="section-number-3">11.14</span> Logical forms, <code>and</code>, <code>or</code>, <code>not</code></h3>
<div class="outline-text-3" id="text-11-14">
<p>
Logical operations are "short-circuiting"
</p>
<ul class="org-ul">
<li>evaluation will return if any sufficient criteria are met
</li>
<li>remaining clauses are not evaluated
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">and</span> <span style="color: #BFEBBF;">true</span> <span style="color: #BFEBBF;">false</span>) <span style="color: #7F9F7F;">;false</span>
(<span style="color: #F0DFAF; font-weight: bold;">and</span> <span style="color: #BFEBBF;">false</span>
     (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [] (println <span style="color: #CC9393;">"launch!"</span>) <span style="color: #BFEBBF;">true</span>)) <span style="color: #7F9F7F;">;false</span>

(<span style="color: #F0DFAF; font-weight: bold;">or</span>  <span style="color: #BFEBBF;">true</span> <span style="color: #BFEBBF;">false</span>) <span style="color: #7F9F7F;">;true</span>
(<span style="color: #F0DFAF; font-weight: bold;">or</span>  <span style="color: #BFEBBF;">true</span> (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [] (println <span style="color: #CC9393;">"eject!"</span>) <span style="color: #BFEBBF;">false</span>)) <span style="color: #7F9F7F;">;true </span>
(not <span style="color: #BFEBBF;">true</span>) <span style="color: #7F9F7F;">;false</span>
(not <span style="color: #BFEBBF;">false</span>) <span style="color: #7F9F7F;">;true</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-15" class="outline-3">
<h3 id="sec-11-15"><span class="section-number-3">11.15</span> "Truthiness"</h3>
<div class="outline-text-3" id="text-11-15">
<p>
Clojure allows things that don't look like <code>true</code> or <code>false</code> 
to denote <code>true</code> and <code>false</code>.
</p>
<ul class="org-ul">
<li>Eliminates a surprising amount of boiler plate since we 
don't bother to explicitly check for <code>true</code> or <code>false</code>
</li>
<li>Any expression that evaluates to a value "other" than 
false or <code>nil</code> is considered logically equivalent to <code>true</code>
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">and</span> <span style="color: #BFEBBF;">true</span> [1]) <span style="color: #7F9F7F;">;[1] =&gt; true </span>
(<span style="color: #F0DFAF; font-weight: bold;">and</span> <span style="color: #BFEBBF;">true</span> <span style="color: #BFEBBF;">nil</span>) <span style="color: #7F9F7F;">;nil =&gt; false</span>
(<span style="color: #F0DFAF; font-weight: bold;">and</span> <span style="color: #BFEBBF;">nil</span>)      <span style="color: #7F9F7F;">;nil =&gt; false</span>
(<span style="color: #F0DFAF; font-weight: bold;">and</span> 2 <span style="color: #BFEBBF;">:a</span>)     <span style="color: #7F9F7F;">;:a  =&gt; true</span>
(<span style="color: #F0DFAF; font-weight: bold;">or</span> <span style="color: #BFEBBF;">false</span> <span style="color: #BFEBBF;">nil</span> <span style="color: #BFEBBF;">:B</span> <span style="color: #BFEBBF;">false</span>) <span style="color: #7F9F7F;">;:B =&gt; true</span>
(<span style="color: #F0DFAF; font-weight: bold;">and</span> [1 2 3] <span style="color: #BFEBBF;">false</span>) <span style="color: #7F9F7F;">;false </span>
(<span style="color: #F0DFAF; font-weight: bold;">or</span> [1 2 3] [4 5 6]) <span style="color: #7F9F7F;">;[1 2 3] =&gt; true</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-11-16" class="outline-3">
<h3 id="sec-11-16"><span class="section-number-3">11.16</span> Conditional Control, <code>if</code>, <code>cond</code>, <code>case</code></h3>
<div class="outline-text-3" id="text-11-16">
<p>
The <code>if</code> form takes a predicate, and two alternate 
bodies to evaluate depending on the truth of the predicate.
</p>
<div class="org-src-container">

<pre class="src src-clojure">(println
 (<span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #BFEBBF;">true</span> <span style="color: #CC9393;">"it was true"</span> <span style="color: #CC9393;">"it was false"</span>))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">it was true</span>
(println
 (<span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #BFEBBF;">false</span> <span style="color: #CC9393;">"it was true"</span> <span style="color: #CC9393;">"it was false"</span>))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">it was false</span>
(println
 (<span style="color: #F0DFAF; font-weight: bold;">if</span> <span style="color: #BFEBBF;">nil</span>  <span style="color: #CC9393;">"it was true"</span> <span style="color: #CC9393;">"it was false"</span>))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">it was false</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-17" class="outline-3">
<h3 id="sec-11-17"><span class="section-number-3">11.17</span> <code>if</code> Examples</h3>
<div class="outline-text-3" id="text-11-17">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">between?</span> [lower upper x]
  (<span style="color: #F0DFAF; font-weight: bold;">and</span> (&gt; x lower)
       (&lt; x upper)))
(<span style="color: #F0DFAF; font-weight: bold;">if</span> (between? 0 20 10)
    (println <span style="color: #CC9393;">"all-clear!"</span>)
    (println <span style="color: #CC9393;">"launch the missiles!"</span>))
(<span style="color: #F0DFAF; font-weight: bold;">if</span> (first [<span style="color: #BFEBBF;">nil</span> 1 2])    
    <span style="color: #BFEBBF;">:first-exists</span>
    <span style="color: #BFEBBF;">:first-is-nil</span>)
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">:first-is-nil </span>
(<span style="color: #F0DFAF; font-weight: bold;">if-let</span> [x (first [1 2])]
    x
    <span style="color: #BFEBBF;">:first-is-nil</span>)
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">1</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-18" class="outline-3">
<h3 id="sec-11-18"><span class="section-number-3">11.18</span> <code>cond</code>, <code>case</code></h3>
<div class="outline-text-3" id="text-11-18">
<p>
<code>cond</code> and <code>case</code> are useful variants of <code>if</code>
</p>
<ul class="org-ul">
<li><code>cond</code> allows multiple conditions to be sequentially 
checked, and if true, evaluates the adjacent body.
</li>
<li><code>case</code> allows us to condition based on a specific value 
and set of defined cases
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">cond</span> (between? 20 40 10) <span style="color: #BFEBBF;">:a</span>
      (between? 40 42 10) <span style="color: #BFEBBF;">:b</span>
      (= 10 10)      <span style="color: #BFEBBF;">:ten</span>
      <span style="color: #BFEBBF;">:else</span> (println <span style="color: #CC9393;">"launch the missiles!"</span>))
(<span style="color: #F0DFAF; font-weight: bold;">case</span> 42
  0  <span style="color: #BFEBBF;">:zero</span>
  10 <span style="color: #BFEBBF;">:ten</span>
  42 <span style="color: #BFEBBF;">:forty-two</span>
  <span style="color: #BFEBBF;">:dunno</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-19" class="outline-3">
<h3 id="sec-11-19"><span class="section-number-3">11.19</span> Iteration with <code>loop/recur</code></h3>
<div class="outline-text-3" id="text-11-19">
<p>
Clojure provides us with the loop/recur idiom.
</p>
<ul class="org-ul">
<li>Inside of a (loop [&amp; bindings] &amp; body) form, we can re-enter
the loop 
</li>
<li>using the (recur &amp; bindings) form.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">Count to ten...</span>
(<span style="color: #F0DFAF; font-weight: bold;">loop</span> [idx 0]
  (<span style="color: #F0DFAF; font-weight: bold;">if</span> (= idx 10) [<span style="color: #BFEBBF;">:done</span> idx]
      (<span style="color: #F0DFAF; font-weight: bold;">recur</span> (+ idx 1))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-20" class="outline-3">
<h3 id="sec-11-20"><span class="section-number-3">11.20</span> Iteration Example</h3>
<div class="outline-text-3" id="text-11-20">
<p>
Loops tend to be primitive, but they 
are extremely useful.  
</p>
<ul class="org-ul">
<li>We will revisit this example using a 
much cleaner method based on functions.
</li>
</ul>
</div>
<ol class="org-ol"><li><a id="sec-11-20-1" name="sec-11-20-1"></a>Find the 10th odd number after 0<br  /><div class="outline-text-4" id="text-11-20-1">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">loop</span> [idx   0
       n     0
       acc   0]
  (<span style="color: #F0DFAF; font-weight: bold;">if</span> (= n 10)    acc <span style="color: #7F9F7F;">;return the number     </span>
      (<span style="color: #F0DFAF; font-weight: bold;">recur</span> (inc idx)  
             (<span style="color: #F0DFAF; font-weight: bold;">if</span> (odd? idx) (inc n) n)
             (<span style="color: #F0DFAF; font-weight: bold;">if</span> (odd? idx) idx acc))))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">19</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-11-21" class="outline-3">
<h3 id="sec-11-21"><span class="section-number-3">11.21</span> <code>do</code> things</h3>
<div class="outline-text-3" id="text-11-21">
<p>
The <code>do</code> form allows us to evaluate a sequence of forms
</p>
<ul class="org-ul">
<li>ignores intermediate results
</li>
<li>returns the last evaluated result 
</li>
<li>useful for performing spooky "side effects" like printing
</li>
</ul>
</div>
<ol class="org-ol"><li><a id="sec-11-21-1" name="sec-11-21-1"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-11-21-1">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">spooky-add-4</span> [x]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [_ (println <span style="color: #CC9393;">"s"</span>)
        _ (println <span style="color: #CC9393;">"p"</span>)
        _ (println <span style="color: #CC9393;">"o"</span>)
        _ (println <span style="color: #CC9393;">"o"</span>)
        _ (println <span style="color: #CC9393;">"k"</span>)
        _ (println <span style="color: #CC9393;">"y"</span>)]
    (+ x 4)))
</pre>
</div>
</div>
</li>
<li><a id="sec-11-21-2" name="sec-11-21-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-11-21-2">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">spooky-add-2</span> [x]
  (<span style="color: #F0DFAF; font-weight: bold;">do</span> (println <span style="color: #CC9393;">"s"</span>)
      (println <span style="color: #CC9393;">"p"</span>)
      (println <span style="color: #CC9393;">"o"</span>)
      (println <span style="color: #CC9393;">"o"</span>)
      (println <span style="color: #CC9393;">"k"</span>)
      (println <span style="color: #CC9393;">"y"</span>)
      (+ x 2)))
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-11-22" class="outline-3">
<h3 id="sec-11-22"><span class="section-number-3">11.22</span> <code>eval</code> expressions</h3>
<div class="outline-text-3" id="text-11-22">
<p>
The <code>eval</code> form allows you to evaluate arbitrary expressions.
</p>
<ul class="org-ul">
<li>the <i>E</i> in REPL
</li>
<li>interprets clojure forms, returning a result
</li>
<li>this mechanism is very powerful
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(eval 2)
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">2</span>
(eval '(+ 2 3))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">5</span>
(eval (list 'list 2 3 4 ''x))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">(2 3 4 x)</span>
(eval (list 'def 'x 2))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">#'training.expression/x</span>
x
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">2</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-23" class="outline-3">
<h3 id="sec-11-23"><span class="section-number-3">11.23</span> Simple Input/Output Via <code>read</code>, <code>println</code></h3>
<div class="outline-text-3" id="text-11-23">
<p>
Clojure provides full access to the same functionality that
the REPL uses to read input and coerce it into clojure expressions.
<code>read</code> lets us collect a line of input from the user:
</p>
<div class="org-src-container">

<pre class="src src-clojure">(read)
</pre>
</div>
<p>
<code>println</code> evaluates the expression, and prints the result with a new line.
</p>
<div class="org-src-container">

<pre class="src src-clojure">(println (+ 2 3))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-24" class="outline-3">
<h3 id="sec-11-24"><span class="section-number-3">11.24</span> Build your own REPL</h3>
<div class="outline-text-3" id="text-11-24">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">repl</span> [n] 
  (<span style="color: #F0DFAF; font-weight: bold;">loop</span> [remaining n]
    (<span style="color: #F0DFAF; font-weight: bold;">if</span> (zero? remaining) <span style="color: #BFEBBF;">:done</span>  
    (<span style="color: #F0DFAF; font-weight: bold;">do</span> (println (eval (read)))
        (<span style="color: #F0DFAF; font-weight: bold;">recur</span> (dec remaining))))))
(repl 2)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-25" class="outline-3">
<h3 id="sec-11-25"><span class="section-number-3">11.25</span> Practical Example: Guess The Number</h3>
<div class="outline-text-3" id="text-11-25">
<p>
Given a simple prompt, msg
</p>
<ul class="org-ul">
<li>prompts the user enter y or n
</li>
<li>parses the result into a keyword :yes or :no, or exception.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">read-yes-no</span>
  [msg]
  (println (str msg <span style="color: #CC9393;">", answer y|n"</span>))
  (<span style="color: #F0DFAF; font-weight: bold;">case</span>  (keyword (read))
    <span style="color: #BFEBBF;">:y</span> <span style="color: #BFEBBF;">:yes</span>
    <span style="color: #BFEBBF;">:n</span> <span style="color: #BFEBBF;">:no</span>
    (<span style="color: #F0DFAF; font-weight: bold;">throw</span> (<span style="color: #7CB8BB;">Exception.</span>  (str <span style="color: #CC9393;">"bad-input!"</span>)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-26" class="outline-3">
<h3 id="sec-11-26"><span class="section-number-3">11.26</span> Guess The Number Ctd.</h3>
<div class="outline-text-3" id="text-11-26">
<p>
Given a lower and upper bound
</p>
<ul class="org-ul">
<li>Repeatedly tries to guess the number using binary search.  
</li>
<li>Recursively calls itself
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">pick-number</span>
  [lower upper]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [half-length (quot (- upper lower)  2) 
        guess       (+ lower half-length )]
    (<span style="color: #F0DFAF; font-weight: bold;">case</span> (read-yes-no  (str <span style="color: #CC9393;">"is your number "</span> guess <span style="color: #CC9393;">" ?"</span>))
      <span style="color: #BFEBBF;">:yes</span>  (println <span style="color: #CC9393;">"Thanks for playing!"</span>)
      <span style="color: #BFEBBF;">:no</span>   (<span style="color: #F0DFAF; font-weight: bold;">case</span> (read-yes-no (str <span style="color: #CC9393;">"Is your number less than? "</span> guess))
              <span style="color: #BFEBBF;">:yes</span>  (pick-number lower (dec guess))
              (pick-number  (inc guess) upper)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-11-27" class="outline-3">
<h3 id="sec-11-27"><span class="section-number-3">11.27</span> Practical Example: Turtles</h3>
<div class="outline-text-3" id="text-11-27">
</div><ol class="org-ol"><li><a id="sec-11-27-1" name="sec-11-27-1"></a>The Logo "turtle"<br  /><div class="outline-text-4" id="text-11-27-1">
<ul class="org-ul">
<li>a useful pedagogical tool
</li>
<li>Visual representation of the state of computation
</li>
<li>It's fun to move around and draw stuff
</li>
<li>As the turtle moves, it draws colored lines.
</li>
<li>Get some mileage under your fingers
</li>
<li>Open up the project in training/turtles/example.clj 
</li>
</ul>
</div>
</li>
<li><a id="sec-11-27-2" name="sec-11-27-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-11-27-2">
<p>
Navigation
</p>
<ul class="org-ul">
<li>(forward  x)
</li>
<li>(backward x) 
</li>
<li>(left  degrees) 
</li>
<li>(right degrees)
</li>
</ul>
</div>
</li>
<li><a id="sec-11-27-3" name="sec-11-27-3"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-11-27-3">
<p>
Cleanup
</p>
<ul class="org-ul">
<li>(clean)
</li>
<li>(home)
</li>
</ul>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Rudimentals - Walking</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1"><span class="section-number-3">12.1</span> Day 2 Walking</h3>
<div class="outline-text-3" id="text-12-1">
<p>
Our goal is to quickly explore useful functions 
clojure provides, namely for working with sequences.
</p>
<ul class="org-ul">
<li>Spend the rest of the time working examples.
</li>
<li>Do some mental "road work"
</li>
<li>Build up to scripting exercises
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2"><span class="section-number-3">12.2</span> Common Mathematical Functions</h3>
<div class="outline-text-3" id="text-12-2">
</div><ol class="org-ol"><li><a id="sec-12-2-1" name="sec-12-2-1"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-12-2-1">
<div class="org-src-container">

<pre class="src src-clojure">(+ 2 3) <span style="color: #7F9F7F;">;5</span>
(* 2 3) <span style="color: #7F9F7F;">;6 </span>
(/ 2.0 3.0) <span style="color: #7F9F7F;">;0.666666...</span>
(/ 2 3) <span style="color: #7F9F7F;">;2/3 </span>
(<span style="color: #7CB8BB;">Math</span>/pow 2 3)<span style="color: #7F9F7F;">; 8.0</span>
(<span style="color: #7CB8BB;">Math</span>/sin <span style="color: #7CB8BB;">Math</span>/<span style="color: #BFEBBF;">PI</span>) 
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">1.2246467991473532E-16</span>
(<span style="color: #7CB8BB;">Math</span>/cos <span style="color: #7CB8BB;">Math</span>/<span style="color: #BFEBBF;">PI</span>) <span style="color: #7F9F7F;">;-1.0</span>
</pre>
</div>
</div>
</li>
<li><a id="sec-12-2-2" name="sec-12-2-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-12-2-2">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">compute remainder </span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">using mod</span>
(mod  10 3) <span style="color: #7F9F7F;">;1 </span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">or use quot and rem </span>
(quot 10 3) <span style="color: #7F9F7F;">;3  </span>
(rem  10 3)  <span style="color: #7F9F7F;">;1 </span>
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">divides-by?</span> [x n]
 (zero? (rem x n)))
(divides-by? 10 2) <span style="color: #7F9F7F;">;true </span>
(divides-by? 10 3) <span style="color: #7F9F7F;">;false</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-12-3" class="outline-3">
<h3 id="sec-12-3"><span class="section-number-3">12.3</span> More Function Composition</h3>
<div class="outline-text-3" id="text-12-3">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">let</span> [f (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (+ x 2))
      g (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (* x 4))
      h (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (<span style="color: #7CB8BB;">Math</span>/sqrt x))
      i #(<span style="color: #7CB8BB;">Math</span>/pow <span style="color: #DFAF8F;">%</span> 3) <span style="color: #7F9F7F;">;fn syntax sugar</span>
      ihgf (compose i h g f)]
  <span style="color: #7F9F7F;">;direct composition</span>
  (i (h (g (f 10)))) 
  <span style="color: #7F9F7F;">;using a composed function</span>
  (ihgf 10)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-4" class="outline-3">
<h3 id="sec-12-4"><span class="section-number-3">12.4</span> Threading Macros for Functional Pipelines</h3>
<div class="outline-text-3" id="text-12-4">
<p>
thread-first, -&gt; 
</p>
<ul class="org-ul">
<li>threads the result of each preceding form as 
the second argument of the next.
<ul class="org-ul">
<li>f(x) = 2 * x<sup>2</sup> + 2  
</li>
<li>f(4) = ?
</li>
</ul>
</li>
</ul>
</div>
<ol class="org-ol"><li><a id="sec-12-4-1" name="sec-12-4-1"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-12-4-1">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">plus2</span> [x] (+ x 2))
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">twice</span> [x] (* x 2))
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">square</span> [x] (* x x))
(plus2 
 (twice 
  (square 4)))
</pre>
</div>
</div>
</li>
<li><a id="sec-12-4-2" name="sec-12-4-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-12-4-2">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">equivalently</span>
(<span style="color: #F0DFAF; font-weight: bold;">-&gt;</span> 4
    (square)
    (twice)
    (plus2))
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-12-5" class="outline-3">
<h3 id="sec-12-5"><span class="section-number-3">12.5</span> Threading Macros for Functional Pipelines Ctd.</h3>
<div class="outline-text-3" id="text-12-5">
<p>
thread-last, -&gt;&gt; 
</p>
<ul class="org-ul">
<li>threads the result of each preceding form as 
the last argument of the next form.
</li>
</ul>
</div>
<ol class="org-ol"><li><a id="sec-12-5-1" name="sec-12-5-1"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-12-5-1">
<div class="org-src-container">

<pre class="src src-clojure">  (<span style="color: #F0DFAF; font-weight: bold;">-&gt;</span> 4
      (square) 
      (twice) 
      (plus2))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">equivalent</span>
  (plus2 
    (twice 
      (square 4)))
</pre>
</div>
</div>
</li>
<li><a id="sec-12-5-2" name="sec-12-5-2"></a>&#xa0;&#xa0;&#xa0;<span class="tag"><span class="BMCOL">BMCOL</span></span><br  /><div class="outline-text-4" id="text-12-5-2">
<div class="org-src-container">

<pre class="src src-clojure">  (<span style="color: #F0DFAF; font-weight: bold;">-&gt;&gt;</span>  4
     (* 4)
     (* 2) 
     (+ 2))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">equivalent </span>
  (+ 2 
    (* 2 
      (* 4 4)))
</pre>
</div>
</div>
</li></ol>
</div>

<div id="outline-container-sec-12-6" class="outline-3">
<h3 id="sec-12-6"><span class="section-number-3">12.6</span> Sequences</h3>
<div class="outline-text-3" id="text-12-6">
<p>
Almost every clojure data structure that serves as a
collection can be viewed through the Sequence abstraction.
</p>

<p>
A sequence is a "lazily" computed stream of values
</p>
<ul class="org-ul">
<li>The source of the sequence is traversed on-demand
</li>
<li>Sequences look and act like lists.
<ul class="org-ul">
<li>Except they are "lazy" vs "Eager".
</li>
<li>We only realize portions of the sequence we need
</li>
</ul>
</li>
<li>We can work with "infinite" data structures
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-12-7" class="outline-3">
<h3 id="sec-12-7"><span class="section-number-3">12.7</span> Basic Operations on Sequences</h3>
<div class="outline-text-3" id="text-12-7">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">lazy sequence of numbers from [0..bound)</span>
(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">numbers</span> (range 100))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">count the elements in the sequence</span>
(count numbers) <span style="color: #7F9F7F;">;100</span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">get the first element...</span>
(first numbers)
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">get the remainder of the sequence, dropping</span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">the first element</span>
(next numbers) <span style="color: #7F9F7F;">;akin to (rest numbers)</span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">get the nth element</span>
(nth numbers 20)
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">get the last element</span>
(last numbers)
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">get a seq over a collection</span>
(seq [1 2 3]) <span style="color: #7F9F7F;">;(1 2 3)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-8" class="outline-3">
<h3 id="sec-12-8"><span class="section-number-3">12.8</span> Deriving New Sequences</h3>
<div class="outline-text-3" id="text-12-8">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">draws the first 10 elements and stops</span>
(take 10 numbers)
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">drops the first 10 elements</span>
(drop 10 numbers)
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">Clump the sequence into pairs</span>
(partition 2 numbers)
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">Return a view of the sequence </span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">akin to a moving window</span>
(partition 2 1 numbers)
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">Generate a sequence using a function</span>
(take 10 (iterate (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (* x 10)) 1))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">Concatenate sequences</span>
(concat [<span style="color: #BFEBBF;">:A</span> <span style="color: #BFEBBF;">:B</span> <span style="color: #BFEBBF;">:c</span>] '(<span style="color: #BFEBBF;">:d</span> <span style="color: #BFEBBF;">:e</span> <span style="color: #BFEBBF;">:f</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-9" class="outline-3">
<h3 id="sec-12-9"><span class="section-number-3">12.9</span> Sequence Comprehensions with <code>for</code></h3>
<div class="outline-text-3" id="text-12-9">
<p>
We can use the (for [bindings] &amp; body) form to
declaratively dissect sequences and return a
new lazy sequences:
</p>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">return a sequence of numbers from (0..9)</span>
(<span style="color: #F0DFAF; font-weight: bold;">for</span> [x (range 10)]
  x) 
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">returns the Cartesian product of xs and ys as</span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">a lazy sequence of vector pairs </span>
(<span style="color: #F0DFAF; font-weight: bold;">for</span> [x (range 10)
      y [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span> <span style="color: #BFEBBF;">:c</span>]]
  [x y])
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-10" class="outline-3">
<h3 id="sec-12-10"><span class="section-number-3">12.10</span> More <code>for</code></h3>
<div class="outline-text-3" id="text-12-10">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">limit the draws to odd values of x using :when</span>
(<span style="color: #F0DFAF; font-weight: bold;">for</span> [x (range 10)
      y [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span> <span style="color: #BFEBBF;">:c</span>]
      <span style="color: #BFEBBF;">:when</span> (odd? x)]
  [x y])
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">introduce lexical bindings using :let</span>
(<span style="color: #F0DFAF; font-weight: bold;">for</span> [x (range 10)
      y [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span> <span style="color: #BFEBBF;">:c</span>]
      <span style="color: #BFEBBF;">:when</span> (odd? x)
      <span style="color: #BFEBBF;">:let</span> [xx (* x x)]]
  [xx y])
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-11" class="outline-3">
<h3 id="sec-12-11"><span class="section-number-3">12.11</span> Pseudo-Iteration via <code>doseq</code>, <code>dotimes</code></h3>
<div class="outline-text-3" id="text-12-11">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">traverse sequences using do-seq,</span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">good for side-effects.</span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">Uses the same binding options as for..</span>
(<span style="color: #F0DFAF; font-weight: bold;">doseq</span> [x (range 10)]
  (println x))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">use dotimes to evaluate the body n-times,</span>
<span style="color: #5F7F5F;">;; </span><span style="color: #7F9F7F;">basically syntax sugar around loop</span>
(<span style="color: #F0DFAF; font-weight: bold;">dotimes</span> [i 10] 
  (println i))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-12" class="outline-3">
<h3 id="sec-12-12"><span class="section-number-3">12.12</span> Constructing Sequences and Vectors</h3>
<div class="outline-text-3" id="text-12-12">
<p>
<code>conj</code> is the general mechanism for 
conjoining elements to collections
</p>
<ul class="org-ul">
<li>constructs a "new" collection with the conjoined element
<ul class="org-ul">
<li>original is preserved (unaltered)
</li>
</ul>
</li>
<li>For uniformity, <code>nil</code> is treated as the empty-sequence
</li>
</ul>
<p>
<code>conj</code> has different behavior based on the data structure
</p>
<ul class="org-ul">
<li>lists (eg. seqs) conjoin by pre-pending items to the head 
</li>
<li>vectors conjoin by appending items to the tail
</li>
</ul>
<p>
<code>cons</code> is a sequence-specific alternative to <code>conj</code> that 
constructs new sequences
</p>
</div>
</div>
<div id="outline-container-sec-12-13" class="outline-3">
<h3 id="sec-12-13"><span class="section-number-3">12.13</span> Construction</h3>
<div class="outline-text-3" id="text-12-13">
<div class="org-src-container">

<pre class="src src-clojure">(conj []   2)   <span style="color: #7F9F7F;">;[2]</span>
(conj [2]  3)   <span style="color: #7F9F7F;">;[2 3]</span>
(conj '()  2)   <span style="color: #7F9F7F;">;(2)</span>
(conj '(2) 3)   <span style="color: #7F9F7F;">;(3 2)</span>
(cons 2 '())    <span style="color: #7F9F7F;">;(2)</span>
(cons 3 '(2))   <span style="color: #7F9F7F;">;(3 2)</span>
(cons 4 '(3 2)) <span style="color: #7F9F7F;">;(4 3 2)</span>
(conj <span style="color: #BFEBBF;">nil</span> 2)    <span style="color: #7F9F7F;">;(2)</span>
(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">xs</span> (list 1 2 3))
(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">ys</span> (rest xs))
xs <span style="color: #7F9F7F;">;(1 2 3)</span>
ys <span style="color: #7F9F7F;">;(2 3)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-14" class="outline-3">
<h3 id="sec-12-14"><span class="section-number-3">12.14</span> Indexed Access</h3>
<div class="outline-text-3" id="text-12-14">
<p>
Use <code>nth</code> for indexed access into vectors and sequences
</p>
<ul class="org-ul">
<li>note: indexing into large lists may be slow (why?)
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(nth [0 1 2 3] 0)   <span style="color: #7F9F7F;">;0 </span>
(nth [0 1 2 3] 1)   <span style="color: #7F9F7F;">;1 </span>
(nth [0 1 2 3] 3)   <span style="color: #7F9F7F;">;3</span>
(nth '(<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span> <span style="color: #BFEBBF;">:c</span>) 2) <span style="color: #7F9F7F;">;:c</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-15" class="outline-3">
<h3 id="sec-12-15"><span class="section-number-3">12.15</span> Building Sequences Manually With <code>lazy-seq</code></h3>
<div class="outline-text-3" id="text-12-15">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">my-range</span> 
   ([bound n]
     (<span style="color: #F0DFAF; font-weight: bold;">when</span> (&lt;  n bound)
       (lazy-seq 
          (cons n (my-range bound (inc n))))))
   ([bound] (my-range bound 0)))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-16" class="outline-3">
<h3 id="sec-12-16"><span class="section-number-3">12.16</span> <code>map</code>, <code>filter</code>, <code>reduce</code></h3>
<div class="outline-text-3" id="text-12-16">
</div><ol class="org-ol"><li><a id="sec-12-16-1" name="sec-12-16-1"></a>The three musketeers of functional programming.<br  /><div class="outline-text-4" id="text-12-16-1">
<ul class="org-ul">
<li>we can build sophisticated, composable, computational pipelines 
</li>
<li>without using goofy loop code 
<ul class="org-ul">
<li>(avoid toilet-bowl programming)
</li>
</ul>
</li>
</ul>
</div>
</li>
<li><a id="sec-12-16-2" name="sec-12-16-2"></a>Befriend them<br  /><div class="outline-text-4" id="text-12-16-2">
<ul class="org-ul">
<li><code>map</code>, <code>filter</code>, and <code>reduce</code> are invaluable
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-12-17" class="outline-3">
<h3 id="sec-12-17"><span class="section-number-3">12.17</span> <code>map</code></h3>
<div class="outline-text-3" id="text-12-17">
<p>
"Maps" a function onto a sequence of values.
</p>
<ul class="org-ul">
<li>We can view mapping as a transformation of the
input sequence
</li>
<li>The elements of the returned
sequence are elements of the original sequence
<ul class="org-ul">
<li>after applying a function to them.
</li>
</ul>
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(map (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (+ x 2)) (range 10))
(map (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] [x x])   (range 10))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">We can map across multiple sequences</span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">simultaneously, and provide a function </span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">that takes multiple args..</span>
(<span style="color: #F0DFAF; font-weight: bold;">let</span> [xs (range 10)
      ys (repeat 2) 
      zs (repeatedly (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [] (rand-int 100)))]
(map (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x y z] (+ x y z))
   xs ys zs))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-18" class="outline-3">
<h3 id="sec-12-18"><span class="section-number-3">12.18</span> <code>filter</code></h3>
<div class="outline-text-3" id="text-12-18">
<p>
<code>filter</code> constructs a new sequence from a predicate function and a sequence
</p>
<ul class="org-ul">
<li>The resulting sequence only has elements that "passed" the filter
</li>
<li>when the filter function was applied to the element, returned a non-false 
value
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">Filter the sequence, retaining only odd numbers.</span>
(filter odd? (range 10))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">(1 3 5 7 9)</span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">Filter evens</span>
(filter even? (range 10))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">(0 2 4 6 8)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-19" class="outline-3">
<h3 id="sec-12-19"><span class="section-number-3">12.19</span> <code>reduce</code></h3>
<div class="outline-text-3" id="text-12-19">
<p>
Reduce allows us to accumulate a result across a
sequence, thereby "reducing" the sequence to a single
resulting value.
</p>
<ul class="org-ul">
<li>takes a reducing function
<ul class="org-ul">
<li>(fn [acc x] &#x2026;)
</li>
<li>"Accumulator" is first argument, second argument is the current
value being reduced (i.e. element in a list).
</li>
</ul>
</li>
<li>can be called with or without an initial value for the reduction.
<ul class="org-ul">
<li>no initial value =&gt; use the first element of the thing being reduced.
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-12-20" class="outline-3">
<h3 id="sec-12-20"><span class="section-number-3">12.20</span> <code>reduce</code> Examples</h3>
<div class="outline-text-3" id="text-12-20">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">sum-numbers</span> [xs]
  (reduce + xs))
(sum-numbers numbers)
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">randomly-sample</span> [xs]
  (reduce (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [acc x]
            (<span style="color: #F0DFAF; font-weight: bold;">if</span> (&gt; (rand) 0.5)
              (conj acc x)
              acc)) [] xs))

(<span style="color: #F0DFAF; font-weight: bold;">-&gt;&gt;</span> (range 10000)
     (filter odd? )
     (map (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (/ x 10.0)))
     (reduce +))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">2500000.0</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-21" class="outline-3">
<h3 id="sec-12-21"><span class="section-number-3">12.21</span> Practical Example: FizzBuzz</h3>
<div class="outline-text-3" id="text-12-21">
<p>
Tell the REPL how to do the following:
</p>
<ul class="org-ul">
<li>Print all the numbers from 0..100 (including 100)
</li>
<li>Except&#x2026;
<ul class="org-ul">
<li>For every number that is a multiple of 3
<ul class="org-ul">
<li>Print "Fizz" instead of the number 
</li>
</ul>
</li>
<li>For every number that is a multiple of 5
<ul class="org-ul">
<li>Print "Buzz" instead of the number.
</li>
</ul>
</li>
<li>For evey number that is a multiple of 
3 AND 5
<ul class="org-ul">
<li>Print "FizzBuzz"
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-12-22" class="outline-3">
<h3 id="sec-12-22"><span class="section-number-3">12.22</span> Maps and Sets</h3>
<div class="outline-text-3" id="text-12-22">
<p>
Clojure provides implementations of data structures 
that represent sorted/unsorted associative maps and sets.
</p>
<ul class="org-ul">
<li>maps associate a <i>key</i> to a <i>value</i>
<ul class="org-ul">
<li>effectively Sets of [ <i>key</i> <i>value</i> ] pairs.
</li>
<li>no duplicate keys.
</li>
</ul>
</li>
<li>sets are analogous to mathematical sets, but store any 
type of clojure data structure
<ul class="org-ul">
<li>support union, intersection, and other set-theoretic 
operations  
</li>
<li>no duplicate entries.
</li>
</ul>
</li>
<li>Both types are compatible with sequences.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-12-23" class="outline-3">
<h3 id="sec-12-23"><span class="section-number-3">12.23</span> Maps</h3>
<div class="outline-text-3" id="text-12-23">
<p>
Because they are so useful and common, Clojure provides a 
syntax for them:
</p>
<ul class="org-ul">
<li>maps are sequences of key / value pairs surround by {} braces.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">the-map</span> 
  {<span style="color: #BFEBBF;">:first-key</span> <span style="color: #CC9393;">"first-value"</span> 
   <span style="color: #BFEBBF;">:second-key</span> <span style="color: #CC9393;">"second-value"</span>})
(keys the-map) <span style="color: #7F9F7F;">;(:first-key :second-key</span>
(vals the-map) <span style="color: #7F9F7F;">;("first-value" "second-value")</span>
(get the-map <span style="color: #BFEBBF;">:first-key</span>) <span style="color: #7F9F7F;">;"first-value"</span>
(get the-map <span style="color: #BFEBBF;">:second-key</span>) <span style="color: #7F9F7F;">;"second-value"</span>
(contains? the-map <span style="color: #BFEBBF;">:third-key</span>) <span style="color: #7F9F7F;">;false</span>
(map the-map [<span style="color: #BFEBBF;">:first-key</span>]) <span style="color: #7F9F7F;">;["first-value"]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-24" class="outline-3">
<h3 id="sec-12-24"><span class="section-number-3">12.24</span> Maps ctd.</h3>
<div class="outline-text-3" id="text-12-24">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">new-map</span> (assoc the-map <span style="color: #BFEBBF;">:third-key</span> 3))
(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">newer-map</span> (dissoc the-map <span style="color: #BFEBBF;">:first-key</span>))
(get new-map   <span style="color: #BFEBBF;">:third-key</span>) <span style="color: #7F9F7F;">;3 </span>
(get newer-map <span style="color: #BFEBBF;">:third-key</span>) <span style="color: #7F9F7F;">;nil </span>
(get newer-map <span style="color: #BFEBBF;">:first-key</span>) <span style="color: #7F9F7F;">;nil </span>
(get newer-map <span style="color: #BFEBBF;">:third-key</span>) <span style="color: #7F9F7F;">;3</span>
(newer-map <span style="color: #BFEBBF;">:third-key</span>) <span style="color: #7F9F7F;">;3</span>
(seq newer-map) <span style="color: #7F9F7F;">;([:second-key "second-value"])</span>
(into {} [[<span style="color: #BFEBBF;">:a</span> 0] [<span style="color: #BFEBBF;">:b</span> 1]]) <span style="color: #7F9F7F;">;{:a 0 :b 1}</span>
(hash-map <span style="color: #BFEBBF;">:a</span> 0 <span style="color: #BFEBBF;">:b</span> 1) <span style="color: #7F9F7F;">;{:a 0 :b 1}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-25" class="outline-3">
<h3 id="sec-12-25"><span class="section-number-3">12.25</span> Sets</h3>
<div class="outline-text-3" id="text-12-25">
<p>
Sets also have their own syntax:
</p>
<ul class="org-ul">
<li>sequences of values inside #{} are 
read as sets.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">s</span> (conj #{} <span style="color: #BFEBBF;">:a</span>))
(contains? s <span style="color: #BFEBBF;">:a</span>) <span style="color: #7F9F7F;">;true </span>
(s <span style="color: #BFEBBF;">:a</span>) <span style="color: #7F9F7F;">;:a </span>
(filter s [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span> <span style="color: #BFEBBF;">:a</span>]) <span style="color: #7F9F7F;">;[:a :a]</span>
(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">s2</span> #{<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span> <span style="color: #BFEBBF;">:c</span>})
(<span style="color: #7CB8BB;">clojure.set</span>/union s s2)<span style="color: #7F9F7F;">;#{:c :b :a}</span>
(<span style="color: #7CB8BB;">clojure.set</span>/intersection s s2)<span style="color: #7F9F7F;">;#{:a}</span>
(<span style="color: #7CB8BB;">clojure.set</span>/difference s2 s)<span style="color: #7F9F7F;">; #{:b :c}</span>
(into #{} [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span>]) <span style="color: #7F9F7F;">;#{:a :b}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-26" class="outline-3">
<h3 id="sec-12-26"><span class="section-number-3">12.26</span> Strings Revisited and Regexes</h3>
<div class="outline-text-3" id="text-12-26">
<p>
Strings are prevalent in a lot of processing tasks, 
so Clojure has a array of functions for dealing with 
them.
</p>
<ul class="org-ul">
<li>Of note, regular-expressions are related to 
processing strings.
</li>
<li>Regular expressions are delimited by #"&#x2026;"
<ul class="org-ul">
<li>we will not spend time on Regexes unless necessary
</li>
<li>i.e. library usage requires them
</li>
</ul>
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(seq <span style="color: #CC9393;">"Hi"</span>) <span style="color: #7F9F7F;">;(\H \i) </span>
(nth <span style="color: #CC9393;">"Hello"</span> 3)<span style="color: #7F9F7F;">; \l</span>
(<span style="color: #7CB8BB;">clojure.string</span>/replace 
  <span style="color: #CC9393;">"Hello"</span> <span style="color: #CC9393;">"e"</span> <span style="color: #CC9393;">"a"</span>) <span style="color: #7F9F7F;">;"hallo" </span>
(<span style="color: #7CB8BB;">clojure.string</span>/upper-case 
  <span style="color: #CC9393;">"hello"</span>) <span style="color: #7F9F7F;">; "HELLO" </span>
(<span style="color: #7CB8BB;">clojure.string</span>/lower-case 
  <span style="color: #CC9393;">"Hello"</span>) <span style="color: #7F9F7F;">; "hello"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-27" class="outline-3">
<h3 id="sec-12-27"><span class="section-number-3">12.27</span> More Strings</h3>
<div class="outline-text-3" id="text-12-27">
<div class="org-src-container">

<pre class="src src-clojure">(str <span style="color: #CC9393;">"h"</span> <span style="color: #CC9393;">\i</span> [<span style="color: #BFEBBF;">:not-a-string</span>])
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">"hi[:not-a-string]" </span>
(<span style="color: #7CB8BB;">clojure.string</span>/join <span style="color: #CC9393;">","</span>
 [<span style="color: #CC9393;">"x"</span> <span style="color: #CC9393;">"y"</span> <span style="color: #CC9393;">"z"</span>]) <span style="color: #7F9F7F;">;"x,y,z"</span>
(<span style="color: #7CB8BB;">clojure.string</span>/join <span style="color: #CC9393;">\newline</span>
 [<span style="color: #CC9393;">"x"</span> <span style="color: #CC9393;">"y"</span> <span style="color: #CC9393;">"z"</span>]) <span style="color: #7F9F7F;">;"x\ny\nz"</span>
(<span style="color: #7CB8BB;">clojure.string</span>/split 
  <span style="color: #CC9393;">"x,y,z"</span> #<span style="color: #CC9393;">","</span>) <span style="color: #7F9F7F;">;["x" "y" "z"]</span>
(<span style="color: #F0DFAF; font-weight: bold;">defn</span> <span style="color: #93E0E3;">line-&gt;tabs</span> [ln]
 (<span style="color: #7CB8BB;">clojure.string</span>/split ln #<span style="color: #CC9393;">"\t"</span>))
(line-&gt;tabs 
  (<span style="color: #7CB8BB;">clojure.string</span>/join <span style="color: #CC9393;">\tab</span> [1 2 3]))
<span style="color: #5F7F5F;">;</span><span style="color: #7F9F7F;">["1" "2" "3"]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-28" class="outline-3">
<h3 id="sec-12-28"><span class="section-number-3">12.28</span> The Road So Far</h3>
<div class="outline-text-3" id="text-12-28">
<p>
We have quite an arsenal of expression by now:
</p>
<ul class="org-ul">
<li>integers, floats, strings, booleans
</li>
<li>keywords, quoted symbols
</li>
<li>Sequences (lists, vectors, maps, sets)
</li>
<li>Functions 
</li>
</ul>
<p>
We've also seen that Clojure provides a fairly 
large standard library for working with these data types.
</p>
<ul class="org-ul">
<li>"Id rather have 100 functions working on a single data type"
<ul class="org-ul">
<li>[some hippy]
</li>
</ul>
</li>
</ul>
<p>
We'll explore a few more useful functions, then move on to 
examples
</p>
<ul class="org-ul">
<li>where we can apply what we've seen
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-12-29" class="outline-3">
<h3 id="sec-12-29"><span class="section-number-3">12.29</span> Useful Built-ins</h3>
<div class="outline-text-3" id="text-12-29">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">xs</span> (range 3))
(group-by odd? xs) <span style="color: #7F9F7F;">;{false [0 2], true [1]}</span>
(group-by
  (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [x] (<span style="color: #F0DFAF; font-weight: bold;">if</span> (odd? x) <span style="color: #BFEBBF;">:odd</span> <span style="color: #BFEBBF;">:even</span>))
  xs)   <span style="color: #7F9F7F;">;{:even [0 2], :odd [1]}</span>
(partition-by
 #(&lt; <span style="color: #DFAF8F;">%</span> 4) (range 5)) <span style="color: #7F9F7F;">;((0 1 2 3) (4))</span>
(map-indexed (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [idx x] [idx x]) xs)
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">([0 0] [1 1] [2 2])</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-30" class="outline-3">
<h3 id="sec-12-30"><span class="section-number-3">12.30</span> More Useful Built-ins</h3>
<div class="outline-text-3" id="text-12-30">
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">def</span> <span style="color: #DFAF8F;">m</span> {<span style="color: #BFEBBF;">:a</span> {<span style="color: #BFEBBF;">:b</span> 1}})
(assoc-in m [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:c</span>] 2)  <span style="color: #7F9F7F;">;{:a {:b 1 :c 2}}</span>
(update-in m [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span>] inc)<span style="color: #7F9F7F;">;{:a {:b 2}}</span>
(update-in m [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span>] + 2) <span style="color: #7F9F7F;">;{:a {:b 3}}</span>
(get-in m [<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span>]) <span style="color: #7F9F7F;">;1</span>
(vec (range 2)) <span style="color: #7F9F7F;">; [0 1]</span>
(vec #{<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span>})  <span style="color: #7F9F7F;">; [:b :a]</span>
(into [] #{<span style="color: #BFEBBF;">:a</span> <span style="color: #BFEBBF;">:b</span>}<span style="color: #7F9F7F;">; [:b :a]</span>
(into [] (map inc) (range 2)) <span style="color: #7F9F7F;">;[1 2]</span>
(into [<span style="color: #BFEBBF;">:z</span>]  {<span style="color: #BFEBBF;">:a</span> 2 <span style="color: #BFEBBF;">:b</span> 3}) <span style="color: #7F9F7F;">;[:z [:a 2] [:b 3]]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-12-31" class="outline-3">
<h3 id="sec-12-31"><span class="section-number-3">12.31</span> IO (Input/Output)</h3>
<div class="outline-text-3" id="text-12-31">
<p>
IO in clojure parlance typically refers 
reading (input) or writing (output) data to
a "stream".
</p>
<ul class="org-ul">
<li>typical streams include files, network sockets
</li>
<li>There are two defined streams: 
<ul class="org-ul">
<li><code>*in*</code>  the stream the REPL's process draws from
</li>
<li><code>*out*</code> the stream the REPL prints to
</li>
<li>notice the asterisk around <b>in</b> and <b>out</b>
<ul class="org-ul">
<li>naming convention (earmuffs) to indicate that the Vars are 
"dynamically scoped"
</li>
<li>more to come&#x2026;
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>
Clojure provides some useful functions for reading and 
writing files.
</p>
<ul class="org-ul">
<li><code>spit</code>, <code>slurp</code>, <code>line-seq</code>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-12-32" class="outline-3">
<h3 id="sec-12-32"><span class="section-number-3">12.32</span> Simple File Operations</h3>
<div class="outline-text-3" id="text-12-32">
<p>
<code>spit</code> and <code>slurp</code> are sufficient for quick and 
dirty file operations
</p>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">use spit to spit a string to a file.</span>
(spit <span style="color: #CC9393;">"output.clj"</span> (str <span style="color: #CC9393;">"Howdy!"</span>))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">use slurp to return the contents of a file </span>
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">as a string </span>
(println (slurp <span style="color: #CC9393;">"output.clj"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-33" class="outline-3">
<h3 id="sec-12-33"><span class="section-number-3">12.33</span> Simple Tab-Delimited Files</h3>
<div class="outline-text-3" id="text-12-33">
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">spit structured data to a tab-delimited file.</span>
(<span style="color: #F0DFAF; font-weight: bold;">let</span> [tabify #(<span style="color: #7CB8BB;">clojure.string</span>/join <span style="color: #CC9393;">"\t"</span> <span style="color: #DFAF8F;">%</span>)]
   (<span style="color: #F0DFAF; font-weight: bold;">-&gt;&gt;</span> (concat [(tabify [<span style="color: #CC9393;">"X"</span> <span style="color: #CC9393;">"Y"</span>])]
        (<span style="color: #F0DFAF; font-weight: bold;">-&gt;&gt;</span> (range 10)
             (map (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [idx] [idx (rand)]))
             (map tabify)))
       (<span style="color: #7CB8BB;">clojure.string</span>/join <span style="color: #CC9393;">\newline</span>)
       (spit <span style="color: #CC9393;">"outlines.txt"</span>)))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">read the data back in....</span>
(<span style="color: #F0DFAF; font-weight: bold;">let</span> [untabify #(<span style="color: #7CB8BB;">clojure.string</span>/split <span style="color: #DFAF8F;">%</span> #<span style="color: #CC9393;">"\t"</span>)]
   (<span style="color: #F0DFAF; font-weight: bold;">-&gt;&gt;</span> (slurp <span style="color: #CC9393;">"outlines.txt"</span>)
        (<span style="color: #7CB8BB;">clojure.string</span>/split-lines)
        (map untabify)
        (map #(into [] (map read-string) <span style="color: #DFAF8F;">%</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-34" class="outline-3">
<h3 id="sec-12-34"><span class="section-number-3">12.34</span> Lazy Tab-Delimited Files</h3>
<div class="outline-text-3" id="text-12-34">
<p>
Find the first entry with a y-value &gt; 0.5
</p>
<ul class="org-ul">
<li>without reading in the entire file.
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure">(<span style="color: #F0DFAF; font-weight: bold;">with-open</span> [rdr (<span style="color: #7CB8BB;">clojure.java.io</span>/reader 
                   <span style="color: #CC9393;">"outlines.txt"</span>)]
  (<span style="color: #F0DFAF; font-weight: bold;">let</span> [untabify #(<span style="color: #7CB8BB;">clojure.string</span>/split <span style="color: #DFAF8F;">%</span> #<span style="color: #CC9393;">"\t"</span>)]
     (<span style="color: #F0DFAF; font-weight: bold;">-&gt;&gt;</span> (line-seq rdr)
          (map untabify)
          (map #(into [] (map read-string) <span style="color: #DFAF8F;">%</span>))
          (drop 1) <span style="color: #7F9F7F;">;ignore headers </span>
          (filter (<span style="color: #F0DFAF; font-weight: bold;">fn</span> [[x y]] 
                  (&gt; y 0.5)))
          (first))))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-35" class="outline-3">
<h3 id="sec-12-35"><span class="section-number-3">12.35</span> Printing Clojure Data to files</h3>
<div class="outline-text-3" id="text-12-35">
<p>
We can <code>read</code> and <code>print</code> clojure 
data
</p>
<ul class="org-ul">
<li>It stands to reason we should be able to change
the targets
</li>
<li><code>read</code> and <code>print</code> to files?
</li>
<li>naive method for "saving" or "serializing" data
</li>
</ul>
<div class="org-src-container">

<pre class="src src-clojure"><span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">save </span>
(<span style="color: #F0DFAF; font-weight: bold;">-&gt;&gt;</span> (with-out-str (print {<span style="color: #BFEBBF;">:a</span> 2}))
     (spit <span style="color: #CC9393;">"hash-map.clj"</span>))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">recover </span>
(<span style="color: #F0DFAF; font-weight: bold;">-&gt;&gt;</span> (slurp <span style="color: #CC9393;">"hash-map.clj"</span>)
     (<span style="color: #7CB8BB;">clojure.edn</span>/read-string))
<span style="color: #5F7F5F;">;;</span><span style="color: #7F9F7F;">{:a 2}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12-36" class="outline-3">
<h3 id="sec-12-36"><span class="section-number-3">12.36</span> IO In Practice</h3>
<div class="outline-text-3" id="text-12-36">
<p>
The preceding examples are great for small things
</p>
<ul class="org-ul">
<li>for varying definitions of "small"
</li>
</ul>
<p>
In practice, we may choose to offload these types of 
IO routines to special-purpose libraries.
</p>
<ul class="org-ul">
<li>Typically optimized for size and space
</li>
<li>May offer compression, encryption, other conveniences.
</li>
</ul>
<p>
Still, we can get a lot of mileage with our pre-defined 
IO
</p>
</div>
</div>
<div id="outline-container-sec-12-37" class="outline-3">
<h3 id="sec-12-37"><span class="section-number-3">12.37</span> Practical Example: Turtles Redux</h3>
<div class="outline-text-3" id="text-12-37">
<p>
We'll revisit the turtles project in training/turtles/example.clj
</p>
<ul class="org-ul">
<li>This time, we have some additional commands
<ul class="org-ul">
<li>(trace-path xys),  (look-at [x y]), &#x2026;
</li>
<li>Instead of using commands, the turtle now can interpret 
sequences of instructions, or points to follow.
</li>
<li>Use the sequence functions to have the turtle perform 
more complex behavior.
</li>
<li>Think in terms of sequences of points, and operations you 
can perform on them.
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-12-38" class="outline-3">
<h3 id="sec-12-38"><span class="section-number-3">12.38</span> Practical Example: Simple statistics</h3>
</div>
<div id="outline-container-sec-12-39" class="outline-3">
<h3 id="sec-12-39"><span class="section-number-3">12.39</span> Practical Example: Project Euler (Possibly)</h3>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> Day 3 - Extending MARATHON using Clojure (WIP)</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-sec-13-1" class="outline-3">
<h3 id="sec-13-1"><span class="section-number-3">13.1</span> Day 3 - Extending MARATHON using Clojure</h3>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> Git Workflow / Version Control</h2>
<div class="outline-text-2" id="text-14">
</div><div id="outline-container-sec-14-1" class="outline-3">
<h3 id="sec-14-1"><span class="section-number-3">14.1</span> Git and Version Control</h3>
</div>
<div id="outline-container-sec-14-2" class="outline-3">
<h3 id="sec-14-2"><span class="section-number-3">14.2</span> Init</h3>
<div class="outline-text-3" id="text-14-2">
<ul class="org-ul">
<li>git init path/to/my/repository
<ul class="org-ul">
<li>git init repo
</li>
<li>git init c:/blah/somerepo
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-3" class="outline-3">
<h3 id="sec-14-3"><span class="section-number-3">14.3</span> Clone</h3>
<div class="outline-text-3" id="text-14-3">
<ul class="org-ul">
<li>git clone path/to/repository
<ul class="org-ul">
<li>git clone blah.git 
</li>
<li>git clone v:/repos/marathon.git
</li>
<li>git clone v:/repos/proc.git 
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-4" class="outline-3">
<h3 id="sec-14-4"><span class="section-number-3">14.4</span> Adding files</h3>
<div class="outline-text-3" id="text-14-4">
<ul class="org-ul">
<li>git add path/to/the/file
<ul class="org-ul">
<li>git add myfile.txt
</li>
<li>git add /src
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-5" class="outline-3">
<h3 id="sec-14-5"><span class="section-number-3">14.5</span> Status</h3>
<div class="outline-text-3" id="text-14-5">
<ul class="org-ul">
<li>git status
</li>
<li>git log
</li>
<li>git gui
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-6" class="outline-3">
<h3 id="sec-14-6"><span class="section-number-3">14.6</span> Commit</h3>
<div class="outline-text-3" id="text-14-6">
<ul class="org-ul">
<li>git commit -a -m "Insert Brilliant Message Here!"
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-7" class="outline-3">
<h3 id="sec-14-7"><span class="section-number-3">14.7</span> Push</h3>
<div class="outline-text-3" id="text-14-7">
<ul class="org-ul">
<li>git push target-repo branch 
</li>
<li>99% use-case:
<ul class="org-ul">
<li>git push origin master 
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-14-8" class="outline-3">
<h3 id="sec-14-8"><span class="section-number-3">14.8</span> Simple and Effective Workflow</h3>
<div class="outline-text-3" id="text-14-8">
<ul class="org-ul">
<li>Make changes
<ul class="org-ul">
<li>alter file (and save!) 
</li>
<li>create a new file.
</li>
</ul>
</li>
<li>check status
<ul class="org-ul">
<li>git status 
</li>
<li>may see "untracked files", "modified files" 
</li>
<li>use "git add" to watch untracked files&#x2026;  
</li>
</ul>
</li>
<li>git commit -a -m "Useful commit message here"
</li>
<li>Repeat
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> Hacking MARATHON</h2>
<div class="outline-text-2" id="text-15">
</div><div id="outline-container-sec-15-1" class="outline-3">
<h3 id="sec-15-1"><span class="section-number-3">15.1</span> Learning About MARATHON</h3>
<div class="outline-text-3" id="text-15-1">
<p>
MARATHONomicon 
</p>
<ul class="org-ul">
<li>Complete documentation of the entire codebase
</li>
<li>Literate programming (self documenting)
</li>
</ul>
<p>
Alternately, just look at the source code.
</p>
<ul class="org-ul">
<li>starting points:
<ul class="org-ul">
<li>marathon.analysis, marathon.demo, 
marathon.ces.testing 
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-15-2" class="outline-3">
<h3 id="sec-15-2"><span class="section-number-3">15.2</span> Data Hooks</h3>
<div class="outline-text-3" id="text-15-2">
</div><ol class="org-ol"><li><a id="sec-15-2-1" name="sec-15-2-1"></a>History is a sequence of [t state] pairs<br  /><div class="outline-text-4" id="text-15-2-1">
<ul class="org-ul">
<li>We have easy functions for getting history sequences 
<ul class="org-ul">
<li>marathon.analysis 
</li>
<li><code>project-&gt;history-seq</code>
</li>
</ul>
</li>
</ul>
</div>
</li>
<li><a id="sec-15-2-2" name="sec-15-2-2"></a>Marathon inputs are table-based<br  /><div class="outline-text-4" id="text-15-2-2">
<ul class="org-ul">
<li>tables can viewed as sequences of records
<ul class="org-ul">
<li>spork.util.table
</li>
</ul>
</li>
<li>We can programmatically manipulate tables 
prior to computing a history.
</li>
</ul>
</div>
</li></ol>
</div>
<div id="outline-container-sec-15-3" class="outline-3">
<h3 id="sec-15-3"><span class="section-number-3">15.3</span> Practical Example: marathon.demo</h3>
</div>
<div id="outline-container-sec-15-4" class="outline-3">
<h3 id="sec-15-4"><span class="section-number-3">15.4</span> Practical Example: Multiple Runs (batching)</h3>
</div>
<div id="outline-container-sec-15-5" class="outline-3">
<h3 id="sec-15-5"><span class="section-number-3">15.5</span> Practical Example: Programmatic Experiments</h3>
</div>
<div id="outline-container-sec-15-6" class="outline-3">
<h3 id="sec-15-6"><span class="section-number-3">15.6</span> Practical Example: Implement Requirements Analysis</h3>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> Simple Scripting</h2>
<div class="outline-text-2" id="text-16">
</div><div id="outline-container-sec-16-1" class="outline-3">
<h3 id="sec-16-1"><span class="section-number-3">16.1</span> Scripting Bonanza</h3>
<div class="outline-text-3" id="text-16-1">
<p>
We'll walk through the training/bonanza.clj 
for a plethora of scripting examples:
</p>
<ul class="org-ul">
<li>SPORK (Spoon's Operations Research Kit)
</li>
<li>Tables 
</li>
<li>Parsing 
</li>
<li>Copy and Paste Easily
</li>
<li>Working With Excel
</li>
<li>Excel IO
</li>
<li>Custom Drawing
</li>
<li>Incanter
</li>
<li>Simple plots
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 31 Aug 2016</p>
<p class="author">Author: T. Spoon</p>
<p class="date">Created: 2017-09-08 Fri 14:18</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
